{"_id":"5TYwSR8Wn7R0L99x","name":"Lucky","type":"feat","img":"systems/dnd5e/icons/skills/yellow_09.jpg","data":{"description":{"value":"<p>You can inspire others through stirring words or music. To do so, you use a bonus action on your turn to choose one creature other than yourself within 60 feet of you who can hear you. That creature gains one Bardic Inspiration die, a d6. Once within the next 10 minutes, the creature can roll the die and add the number rolled to one ability check, attack roll, or saving throw it makes. The creature can wait until after it rolls the d20 before deciding to use the Bardic Inspiration die, but must decide before the GM says whether the roll succeeds or fails. Once the Bardic Inspiration die is rolled, it is lost. A creature can have only one Bardic Inspiration die at a time.</p><p>You can use this feature a number of times equal to your Charisma modifier (a minimum of once).</p><p>You regain any expended uses when you finish a long rest.</p><p>Your Bardic Inspiration die changes when you reach certain levels in this class. The die becomes a d8 at 5th level, a d10 at 10th level, and a d12 at 15th level.</p><p><em>**Foundry note: Note the Other Formula is set to the base default of 1d6 and limited uses is set to the minimum of 1. Additionally, recovery is set to long rest (for levels before @Compendium[dnd5e.classfeatures.3VDZGs5Ug3hIE322]{Font of Inspiration} is gained). Please manually adjust as required.</em></p>","chat":"","unidentified":""},"source":"PHB pg. 53","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"lr","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"1d6","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Bard 1","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true}},"effects":[{"_id":"GrZ2AlujZEWCppJt","changes":[{"key":"flags.midi-qol.optional.lucky.attack","mode":5,"value":"reroll","priority":"20"},{"key":"flags.midi-qol.optional.lucky.label","mode":5,"value":"Lucky","priority":"20"},{"key":"flags.midi-qol.optional.lucky.save","mode":5,"value":"reroll","priority":"20"},{"key":"flags.midi-qol.optional.lucky.check","mode":5,"value":"reroll","priority":"20"},{"key":"flags.midi-qol.optional.lucky.count","mode":5,"value":"3","priority":"20"},{"key":"flags.midi-qol.optional.lucky.skill","mode":5,"value":"reroll","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_09.jpg","label":"Luck Point","origin":"Item.dQvh9dejF0s0d9nk","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.hpLNiGq7y67d2EHA"},"midi-qol":{"onUseMacroName":""},"betterRolls5e":{"critRange":{"type":"String","value":null},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":true},"altValue":{"use":true,"resource":true,"charge":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_ldurt0p3e8","color":"#000000"}}}
{"_id":"6r4daHSAjIXppAX0","name":"Spirit Guardians 0.8.87","type":"spell","img":"systems/dnd5e/icons/spells/needles-sky-2.jpg","data":{"description":{"value":"<p>You call forth spirits to protect you. They flit around you to a distance of 15 feet for the duration. If you are good or neutral, their spectral form appears angelic or fey (your choice). If you are evil, they appear fiendish.</p>\n<p>When you cast this spell, you can designate any number of creatures you can see to be unaffected by it. An affected creature's speed is halved in the area, and when the creature enters the area for the first time on a turn or starts its turn there, it must make a Wisdom saving throw. On a failed save, the creature takes 3d8 radiant damage (if you are good or neutral) or 3d8 necrotic damage (if you are evil). On a successful save, the creature takes half as much damage.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d8 for each slot level above 3rd.</p>\n<p>Midi-qol: Requires active auras to work and<strong> assumes there is a combat active</strong>.<br />Supports the following:</p>\n<ol>\n<li>If a player enters the spirit guardian range on their turn they will save &amp;&amp; take damage.</li>\n<li>At the start of an affected tokens turn they will save &amp;&amp; take damage.</li>\n<li>If they move out of range of the effect they won't take damage anymore.</li>\n<li>All effects removed on expiry/loss of concentration.</li>\n<li>Spell scaling is supported automatically.</li>\n<li>If automated animations, only the initial cast will spawn the animation.</li>\n</ol>","chat":"","unidentified":""},"source":"PHB pg. 278","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":0,"scaling":"spell"},"level":3,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"A holy symbol","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":"1d8"}},"effects":[{"_id":"kJdmHhTJH03zJxo2","changes":[{"key":"data.attributes.movement.all","mode":0,"value":"/2","priority":"20"},{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=start,\nlabel=Spirit  Guardians,\ndamageRoll=(@spellLevel)d8,\ndamageType=radiant,\nsaveRemove=false,\nsaveDC=@attributes.spelldc,\nsaveAbility=wis,\nsaveDamage=halfdamage,\nkillAnim=true","priority":"20"},{"key":"macro.itemMacro","mode":0,"value":"@token @spellLevel @attributes.spelldc","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/spells/needles-sky-2.jpg","label":"Spirit Guardians","origin":"Item.LTQm45DD4V2IqDpi","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":true,"aura":"Enemy","radius":15,"alignment":"","type":"","ignoreSelf":true,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.attributes.movement.all","flags.midi-qol.OverTime","macro.itemMacro"]}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.uCud2s4TjMfjiXUb"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true,"type":"Boolean"},"quickDesc":{"value":true,"altValue":true,"type":"Boolean"},"quickSave":{"value":true,"altValue":true,"type":"Boolean"},"quickProperties":{"value":true,"altValue":true,"type":"Boolean"},"quickVersatile":{"value":false,"altValue":false,"type":"Boolean"},"quickFlavor":{"value":true,"altValue":true,"type":"Boolean"},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"scene-packer":{"hash":"5517dcc2725d9c3f9845b639608127534ede5c37","sourceId":"Item.B8IrEtWEU0h9EtqY"},"itemacro":{"macro":{"data":{"_id":null,"name":"Spirit Guardians 0.8.85","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const lastArg = args[args.length -1];\n// Check when applying the effect - if the token is not the caster and it IS the tokens turn they take damage\nif (args[0] === \"on\" && args[1] !== lastArg.tokenId && lastArg.tokenId === game.combat?.current.tokenId) {\n    const sourceItem = await fromUuid(lastArg.origin);\n    let theActor = await fromUuid(lastArg.actorUuid);\n    if (theActor.actor) theActor = theActor.actor;\n    const itemData = mergeObject(duplicate(sourceItem.data), {\n        type: \"weapon\",\n        effects: [],\n        flags: {\n            \"midi-qol\": {\n                noProvokeReaction: true, // no reactions triggered\n                onUseMacroName: null // \n            },\n        },\n        data: {\n            actionType: \"save\",\n            save: {dc: Number.parseInt(args[3]), ability: \"wis\", scaling: \"flat\"},\n            damage: { parts: [[`${args[2]}d8`, \"radiant\"]] },\n            \"target.type\": \"self\",\n            components: {concentration: false, material: false, ritual: false, somatic: false, value: \"\", vocal: false},\n            duration: {units: \"inst\", value: undefined},\n            weaponType: \"improv\"\n        }\n    }, {overwrite: true, inlace: true, insertKeys: true, insertValues: true});\n    itemData.data.target.type = \"self\";\n    setProperty(itemData.flags, \"autoanimations.killAnim\", true);\n    itemData.flags.autoanimations.killAnim = true;;\n    const item = new CONFIG.Item.documentClass(itemData, { parent: theActor })\n    const options = { showFullCard: false, createWorkflow: true, versatile: false, configureDialog: false };\n    await MidiQOL.completeItemRoll(item, options);\n\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"gm-notes":{},"autoanimations":{"version":1,"killAnim":false,"options":{"ammo":false},"override":false,"autoOverride":{"enable":false},"allSounds":{"item":{"enableAudio":false}},"sourceToken":{"enable":false},"targetToken":{"enable":false}},"cf":{"id":"temp_5o7edvfx9a","color":"#000000"}}}
{"_id":"84EYeCJvpE1CnPVx","name":"Sneak Attack","type":"feat","img":"systems/dnd5e/icons/skills/violet_27.jpg","data":{"description":{"value":"<p>Beginning at 1st level, you know how to strike subtly and exploit a foe's distraction. Once per turn, you can deal an extra [[/r 1d6]] damage to one creature you hit with an attack if you have advantage on the attack roll. The attack must use a finesse or a ranged weapon.</p>\n<p>You don't need advantage on the attack roll if another enemy of the target is within 5 feet of it, that enemy isn't <a href=\"https://5e.tools/conditionsdiseases.html#incapacitated_phb\">incapacitated</a>, and you don't have disadvantage on the attack roll.</p>\n<p>The amount of the extra damage increases as you gain levels in this class, as shown in the Sneak Attack column of the Rogue table.</p>\n<p>Updated 0.8.97 for v9</p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Rogue 1","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"effects":[{"_id":"Ns5pHr7gcYPTJ7HU","flags":{"dae":{"stackable":false,"transfer":true,"specialDuration":[],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null}},"changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Sneak Attack","priority":"30"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/violet_27.jpg","label":"Sneak Attack","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.Phll73Y1o1t6Park","tint":null,"transfer":true,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"storm-kings-thunder","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Sneak Attack","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"// v1.1\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].item.data.actionType === \"mwak\" && !args[0].item.data.properties?.fin) \n  return {}; // ranged or finesse\nif (args[0].hitTargets.length < 1) return {};\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nif (!actor || !token || args[0].hitTargets.length < 1) return {};\nconst rogueLevels = actor.getRollData().classes.rogue?.levels;\nif (!rogueLevels) {\n  MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n  return {}; // rogue only\n}\nlet target = canvas.tokens.get(args[0].hitTargets[0].id ?? args[0].hitTargers[0]._id);\nif (!target) MidiQOL.error(\"Sneak attack macro failed\");\n\nif (game.combat) {\n  const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n  const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n   return {};\n  }\n}\nlet foundEnemy = true;\nlet isSneak = args[0].advantage;\n\nif (!isSneak) {\n  foundEnemy = false;\n  let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n    let nearby = (t.actor &&\n         t.actor?.id !== args[0].actor._id && // not me\n         t.id !== target.id && // not the target\n         t.actor?.data.data.attributes?.hp?.value > 0 && // not incapacitated\n         t.data.disposition !== target.data.disposition && // not an ally\n         MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n     );\n    foundEnemy = foundEnemy || (nearby && t.data.disposition === -target.data.disposition)\n    return nearby;\n  });\n  isSneak = nearbyEnemy.length > 0;\n}\nif (!isSneak) {\n  MidiQOL.warn(\"Sneak Attack Damage: No advantage/ally next to target\");\n  return {};\n}\nlet useSneak = getProperty(actor.data, \"flags.dae.autoSneak\");\nif (!useSneak) {\n    let dialog = new Promise((resolve, reject) => {\n      new Dialog({\n      // localize this text\n      title: \"Conditional Damage\",\n      content: `<p>Use Sneak attack?</p>`+(!foundEnemy ? \"<p>Only Nuetral creatures nearby</p>\" : \"\"),\n      buttons: {\n          one: {\n              icon: '<i class=\"fas fa-check\"></i>',\n              label: \"Confirm\",\n              callback: () => resolve(true)\n          },\n          two: {\n              icon: '<i class=\"fas fa-times\"></i>',\n              label: \"Cancel\",\n              callback: () => {resolve(false)}\n          }\n      },\n      default: \"two\"\n      }).render(true);\n    });\n    useSneak = await dialog;\n}\nif (!useSneak) return {}\nconst diceMult = args[0].isCritical ? 2: 1;\nconst baseDice = Math.ceil(rogueLevels/2);\nif (game.combat) {\n  const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n  const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n  if (combatTime !== lastTime) {\n     await actor.setFlag(\"midi-qol\", \"sneakAttackTime\", combatTime)\n  }\n}\n\n// How to check that we've already done one this turn?\nreturn {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"betterRolls5e":{"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"core":{"sourceId":"Item.bhuz5hzr0YsHJd1N"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"a1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"animLevel":false,"bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","rangedOptions":{"rangeDmgType":""},"spellOptions":{"spellLoops":1},"uaStrikeType":"physical","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"exAnimLevel":false,"impactVar":"a1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"8bcDzaRiO583cd8a","name":"Aura of Courage MQ0.8.85","type":"feat","img":"icons/magic/light/explosion-beam-impact-silhouette.webp","data":{"description":{"value":"<p>Starting at 10th level, you and friendly creatures within 10 feet of you can't be frightened while you are conscious.</p>\n<p>At 18th level, the range of this aura increases to 30 feet.</p>\n<p>Midi-qol: requires Active Auras to function</p>","chat":"","unidentified":""},"source":"PHB pg. 85","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":null,"type":"self"},"range":{"value":10,"long":30,"units":"ft"},"uses":{"value":0,"max":0,"per":"","type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin 10","recharge":{"value":null,"charged":false},"attributes":{"spelldc":10}},"effects":[{"_id":"TJteucmq1pmKCCkc","changes":[{"key":"data.traits.ci.value","mode":2,"value":"frightened","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/magic/light/explosion-beam-impact-silhouette.webp","label":"Aura of Courage","origin":"Item.TD7s9EYoA6Bg5mdp","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":true,"aura":"All","radius":10,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.traits.ci.value"}],"folder":null,"sort":0,"permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.TD7s9EYoA6Bg5mdp"},"scene-packer":{"sourceId":"Item.kpgiUAoyLfvKtbaY"},"betterRolls5e":{"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"AKfzFJlvNpPVv1qh","name":"Hunter's Mark - MQ0.8.20","type":"spell","img":"systems/dnd5e/icons/spells/evil-eye-red-1.jpg","data":{"description":{"value":"<p>You choose a creature you can see within range and mystically mark it as your quarry. Until the spell ends, you deal an extra {@dice 1d6} damage to the target whenever you hit it with a weapon attack, and you have advantage on any Wisdom (Perception) or Wisdom (Survival) check you make to find it. If the target drops to 0 hit points before this spell ends, you can use a bonus action on a subsequent turn of yours to mark a new creature.</p>","chat":"","unidentified":""},"source":"PHB pg. 251","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":90,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":1,"school":"div","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""}},"effects":[{"_id":"9eOiLd1FGoDJ9eLu","changes":[],"disabled":false,"duration":{"startTime":null,"seconds":3600},"icon":"systems/dnd5e/icons/spells/evil-eye-red-1.jpg","label":"Marked","origin":"Item.SU8tsBLWTXP7NUdb","tint":null,"transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}}}],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.0xmXiPiuYws1OGcX"},"midi-qol":{"onUseMacroName":"ItemMacro","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Hunter's Mark - MQ0.8.20","type":"script","author":"g4WGw0lAZ3nIhapn","img":"icons/svg/dice-target.svg","scope":"global","command":"// Sample Hunters mark onUse macro\nif (args[0].hitTargets.length === 0) return;\nif (args[0].tag === \"OnUse\") {\n    // Sample Hunters mark\n    let targetUuid = args[0].hitTargets[0].uuid;\n    let actor = await MidiQOL.MQfromActorUuid(args[0].actorUuid); // actor who cast the spell\n\n    if (!actor || !targetUuid) {\n      console.error(\"Hunter's Mark: no token/target selected\");\n      return;\n    }\n    // create an active effect, \n    //  one change showing the hunter's mark icon on the caster\n    //  the second setting the flag for the macro to be called when damaging an opponent\n \n    const effectData = {\n      changes: [\n        {key: \"flags.midi-qol.huntersMark\", mode: 5, value: targetUuid, priority: 20}, // who is marked\n        // {key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.${args[0].item.name}`, priority: 20} // macro to apply the damage\n        {key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.${args[0].item.name}`, priority: 20} // macro to apply the damage\n      ],\n\n      origin: args[0].itemUuid, //flag the effect as associated to the spell being cast\n      disabled: false,\n      duration: args[0].item.effects[0].duration,\n      icon: args[0].item.img,\n      label: args[0].item.name\n    }\n    effectData.duration.startTime = game.time.worldTime;\n    await actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n} else if (args[0].tag === \"DamageBonus\") {\n    // only weapon attacks\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {};\n    let targetUuid = args[0].hitTargets[0].uuid;\n    // only on the marked target\n    if (targetUuid !== getProperty(args[0].actor.flags, \"midi-qol.huntersMark\")) return {};\n    let damageType = args[0].item.data.damage.parts[0][1];\n    const diceMult = args[0].isCritical ? 2: 1;\n    return {damageRoll: `${diceMult}d6[${damageType}]`, flavor: \"Hunters Mark Damage\"}\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"AyuLaL8BsCuhDUhj","name":"Bardic Inspiration","type":"feat","img":"systems/dnd5e/icons/skills/yellow_08.jpg","data":{"description":{"value":"<p>You can inspire others through stirring words or music. To do so, you use a bonus action on your turn to choose one creature other than yourself within 60 feet of you who can hear you. That creature gains one Bardic Inspiration die, a d6. Once within the next 10 minutes, the creature can roll the die and add the number rolled to one ability check, attack roll, or saving throw it makes. The creature can wait until after it rolls the d20 before deciding to use the Bardic Inspiration die, but must decide before the GM says whether the roll succeeds or fails. Once the Bardic Inspiration die is rolled, it is lost. A creature can have only one Bardic Inspiration die at a time.</p>\n<p>You can use this feature a number of times equal to your Charisma modifier (a minimum of once).</p>\n<p>You regain any expended uses when you finish a long rest.</p>\n<p>Your Bardic Inspiration die changes when you reach certain levels in this class. The die becomes a d8 at 5th level, a d10 at 10th level, and a d12 at 15th level.</p>\n<p><em>**Midi-qol note: The Other Formula is removed as it is not  required<br /> Additionally, recovery is set to long rest (for levels before @Compendium[dnd5e.classfeatures.3VDZGs5Ug3hIE322]{Font of Inspiration} is gained). Please manually adjust as required.</em></p>","chat":"","unidentified":""},"source":"PHB pg. 53","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":2,"max":"5","per":"lr","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Bard 1","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true}},"effects":[{"_id":"GrZ2AlujZEWCppJt","changes":[{"key":"flags.midi-qol.optional.bardicInspiration.attack","mode":5,"value":"1d@flags.dae.BardicInspirationDice","priority":"20"},{"key":"flags.midi-qol.optional.bardicInspiration.save","mode":5,"value":"1d@flags.dae.BardicInspirationDice","priority":"20"},{"key":"flags.midi-qol.optional.bardicInspiration.check","mode":5,"value":"1d@flags.dae.BardicInspirationDice","priority":"20"},{"key":"flags.midi-qol.optional.bardicInspiration.label","mode":5,"value":"Bardic Inspiration","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_08.jpg","label":"Inspired","origin":"Item.dQvh9dejF0s0d9nk","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc"]},{"_id":"E4t1UpMBxMNjDXAk","changes":[{"key":"flags.dae","mode":0,"value":"BardicInspirationDice (floor(@classes.bard.levels/5)+3) * 2","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_08.jpg","label":"Bardic Inspiration Dice","origin":"Item.qf4KSRUeFqSoP8fs","transfer":true,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dae"}],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.hpLNiGq7y67d2EHA"},"midi-qol":{"onUseMacroName":"","effectActivation":false,"forceCEOff":false},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true},"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"use":true},"altValue":{"use":true}}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"cf":{"id":"temp_ovon30cu8t","folderPath":["temp_ldurt0p3e8"],"color":"#000000","fontColor":"#FFFFFF","name":"Class Features","children":[],"icon":""}},"_id":"CPPoUxSKfd4i2Xr7"}
{"_id":"Cc92uajHszYAjkks","name":"Improved Divine Smite","type":"feat","img":"icons/magic/symbols/cog-shield-white-blue.webp","data":{"description":{"value":"<p>By 11th level, you are so suffused with righteous might that all your melee weapon strikes carry divine power with them.</p>\n<p>Whenever you hit a creature with a melee weapon, the creature takes an extra 1d8 radiant damage. If you also use your @Compendium[dnd5e.classfeatures.ySMPQ6zNSlvkrl2f]{Divine Smite} with an attack, you add this damage to the extra damage of your Divine Smite.</p>","chat":"","unidentified":""},"source":"PHB pg. 85","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[["1d8","radiant"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin 11","recharge":{"value":null,"charged":false}},"effects":[{"_id":"9fxlvxN5rkcl9fvW","flags":{"dae":{"transfer":true}},"changes":[{"key":"data.bonuses.mwak.damage","value":"1d8","mode":0,"priority":0}],"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/light_06.jpg","label":"Improved Divine Smite","transfer":true,"disabled":false}],"folder":null,"sort":0,"permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"flags":{"_sheetTab":"details","entityorder":{"order":162},"dynamiceffects":{"alwaysActive":true,"equipActive":false,"effects":[{"modSpecKey":"data.bonuses.mwak.damage","value":"1d8","mode":"+","targetSpecific":false,"id":1,"itemId":"lKuURNfVbHN88Xno","active":false,"_targets":[]}]},"core":{"sourceId":"Compendium.Dynamic-Effects-SRD.DAE SRD Feats.uvEGiLvPgzje1L6K"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"scene-packer":{"sourceId":"Item.SHXT2nuuWXqlqnGw"},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"DieKhAmkFrHfXKgl","name":"Bardic Inspiration (No DAE)","type":"feat","img":"systems/dnd5e/icons/skills/yellow_08.jpg","data":{"description":{"value":"<p>You can inspire others through stirring words or music. To do so, you use a bonus action on your turn to choose one creature other than yourself within 60 feet of you who can hear you. That creature gains one Bardic Inspiration die, a d6. Once within the next 10 minutes, the creature can roll the die and add the number rolled to one ability check, attack roll, or saving throw it makes. The creature can wait until after it rolls the d20 before deciding to use the Bardic Inspiration die, but must decide before the GM says whether the roll succeeds or fails. Once the Bardic Inspiration die is rolled, it is lost. A creature can have only one Bardic Inspiration die at a time.</p><p>You can use this feature a number of times equal to your Charisma modifier (a minimum of once).</p><p>You regain any expended uses when you finish a long rest.</p><p>Your Bardic Inspiration die changes when you reach certain levels in this class. The die becomes a d8 at 5th level, a d10 at 10th level, and a d12 at 15th level.</p><p><em>**Foundry note: Note the Other Formula is set to the base default of 1d6 and limited uses is set to the minimum of 1. Additionally, recovery is set to long rest (for levels before @Compendium[dnd5e.classfeatures.3VDZGs5Ug3hIE322]{Font of Inspiration} is gained). Please manually adjust as required.</em></p>","chat":"","unidentified":""},"source":"PHB pg. 53","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":2,"max":"5","per":"lr","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"1d6","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Bard 1","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true}},"effects":[{"_id":"GrZ2AlujZEWCppJt","changes":[{"key":"flags.midi-qol.optional.bardicInspiration.attack","mode":5,"value":"1d6","priority":"20"},{"key":"flags.midi-qol.optional.bardicInspiration.label","mode":5,"value":"Bardic Inspiration","priority":"20"},{"key":"flags.midi-qol.optional..bardicInspiration.save","mode":5,"value":"1d6","priority":"20"},{"key":"flags.midi-qol.optional.bardicInspiration.check","mode":5,"value":"1d6","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_08.jpg","label":"Inspired","origin":"Item.dQvh9dejF0s0d9nk","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.hpLNiGq7y67d2EHA"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"Dpc1nj3RGKO1AvWS","name":"Aura of Protection","type":"feat","img":"systems/dnd5e/icons/skills/blue_13.jpg","data":{"description":{"value":"<p>Starting at 6th level, whenever you or a friendly creature within 10 feet of you must make a saving throw, the creature gains a bonus to the saving throw equal to your Charisma modifier (with a minimum bonus of +1). You must be conscious to grant this bonus.</p>\n<p> At 18th level, the range of this aura increases to 30 feet.</p>\n<p>Midi-qol: requires Active Auras to function</p>","chat":"","unidentified":""},"source":"PHB pg. 85","activation":{"type":"none","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":10,"long":30,"units":"ft"},"uses":{"value":0,"max":"0","per":"","type":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin 6","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"effects":[{"_id":"9OFOAQENA1VYGc7T","flags":{"ActiveAuras":{"isAura":true,"inactive":false,"aura":"Allies","radius":10,"hidden":false,"height":false,"alignment":"","type":"","ignoreSelf":false,"hostile":false,"onlyOnce":false},"dae":{"stackable":"none","specialDuration":[],"transfer":true,"macroRepeat":"none"},"dnd5e-helpers":{"rest-effect":"Ignore"}},"changes":[{"key":"data.bonuses.abilities.save","mode":0,"value":"+@abilities.cha.mod","priority":"20"},{"key":"macro.tokenMagic","mode":0,"value":"magic-field","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/blue_13.jpg","label":"Aura of Protection","origin":"Actor.Y7foSiLRLo7ysFr9.OwnedItem.MyXtCPagugDlf6TQ","tint":null,"transfer":true,"selectedKey":["data.bonuses.abilities.save","macro.tokenMagic"]}],"folder":null,"sort":0,"permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"flags":{"dae":{"migrated":true,"activeEquipped":false,"alwaysActive":true},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":false},"core":{"sourceId":"Item.WiVleJLWZ5UXryDN"},"gm-notes":{},"exportSource":{"world":"testWorld","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"betterRolls5e":{"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"EibKlOVye2eeS3kt","name":"GM Inspiration","type":"feat","img":"icons/magic/control/buff-luck-fortune-green.webp","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"_id":"9kPKxYfLznahYDJe","changes":[{"key":"flags.midi-qol.advantage.all","mode":5,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/magic/control/buff-luck-fortune-green.webp","label":"GM Inspiration","origin":"Item.F58v9Hv37KF4JszF","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":["1Action","isSave","isCheck","isSkill"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.abilities.cha.dc"}],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"itemacro":{"macro":{"data":{"_id":null,"name":"Inspiration","type":"script","author":"g4WGw0lAZ3nIhapn","img":"icons/svg/dice-target.svg","scope":"global","command":"actor.deleteEmbeddedDocuments(\"Item\", [item.id])","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"ItemMacro"},"core":{"sourceId":"Item.F58v9Hv37KF4JszF"},"cf":{"id":"temp_ldurt0p3e8","color":"#000000"}}}
{"_id":"GJADhdABr6hilZmt","name":"Arrow of Slaying (Dragon) MQ0.8.58","type":"consumable","img":"systems/dnd5e/icons/skills/arrow_02.jpg","data":{"description":{"value":"<p>An arrow of slaying is a magic weapon meant to slay a particular kind of creature. Some are more focused than others; for example, there are both arrows of dragon slaying and arrows of blue dragon slaying. If a creature belonging to the type, race, or group associated with an arrow of slaying takes damage from the arrow, the creature must make a DC 17 Constitution saving throw, taking an extra 6d10 piercing damage on a failed save, or half as much extra damage on a successful one.<br />Once an arrow of slaying deals its extra damage to a creature, it becomes a nonmagical arrow.</p>","chat":"","unidentified":""},"source":"DMG pg. 152","quantity":1,"weight":0.05,"price":600,"attunement":0,"equipped":false,"rarity":"veryRare","identified":true,"activation":{"type":"action","cost":1,"condition":"[\"dragon\"].includes(\"@raceOrType\")"},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":"","autoDestroy":false},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"rwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"6d10","save":{"ability":"con","dc":17,"scaling":"flat"},"consumableType":"ammo"},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"midi-qol":{"criticalThreshold":"20","onUseMacroName":"","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.dnd5e.items.aXsfZvDCdpuv3Yvb"},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":true,"altValue":true},"quickAttack":{"value":true,"altValue":true},"quickSave":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_bf8mj8lxpvb","color":"#000000"}}}
{"_id":"GLM2VJDV5ifkmUSs","name":"Spiritual Weapon MQ0.8.85 + Warpgate","type":"spell","img":"systems/dnd5e/icons/spells/enchant-magenta-2.jpg","data":{"description":{"value":"<p>You create a floating, spectral weapon within range that lasts for the duration or until you cast this spell again. When you cast the spell, you can make a melee spell attack against a creature within 5 feet of the weapon. On a hit, the target takes force damage equal to 1d8 + your spellcasting ability modifier.</p>\n<p>As a bonus action on your turn, you can move the weapon up to 20 feet and repeat the attack against a creature within 5 feet of it.</p>\n<p>The weapon can take whatever form you choose. Clerics of deities who are associated with a particular weapon (as St. Cuthbert is known for his mace and Thor for his hammer) make this spell's effect resemble that weapon.</p>\n<p><strong>Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the damage increases by 1d8 for every two slot levels above the 2nd.</p>\n<p><strong>midi-qol:</strong> Requires warpgate and midi-qol to run and summons a spiritual weapon for the casting player to control.</p>\n<p>You need a spiritual weapon world actor - you can use the one from Warpgate or create your own - it needs a single attack \"Slash\" which should be a melee spell attack range touch. The damage will be set by the casting of the spell.</p>","chat":"","unidentified":""},"source":"PHB pg. 278","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.JbxsYXxSOTZbf9I0"},"midi-qol":{"onUseMacroName":"ItemMacro","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Spiritual Weapon","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const origin = args[0].itemUuid;\nif (origin) {\n    const removeList = actor.effects.filter(ae => ae.data.origin === origin && getProperty(ae.data, \"flags.dae.transfer\") !== 3).map(ae=>ae.id);\n    await actor.deleteEmbeddedDocuments(\"ActiveEffect\", removeList)\n}\nconst updates = {\n    Item: {\n    \"Slash\": {\n      \"data.attackBonus\": args[0].actor.data.attributes.spelldc-8+args[0].actor.data.bonuses.msak.attack,\n      \"data.damage.parts\":[[`${1 + Math.floor((args[0].spellLevel-2)/2)}d8 + ${args[0].actor.data.abilities[args[0].actor.data.attributes.spellcasting]?.mod || \"\"}`,\"force\"]]\n    }\n  }\n}\nconst result = await warpgate.spawn(\"Spiritual Weapon\",  {embedded: updates}, {}, {});\nif (result.length !== 1) return;\nconst targetUuid = `Scene.${canvas.scene.id}.Token.${result[0]}`;\n\n\nawait actor.createEmbeddedDocuments(\"ActiveEffect\", [{\n    label: \"Summon\", \n    icon: args[0].item.img, \n    origin,\n    duration: {second: 60, rounds:10},\n    \"flags.dae.stackable\": false,\n    changes: [{key: \"flags.dae.deleteUuid\", mode: CONST.ACTIVE_EFFECT_MODES.ADD, value: [targetUuid]}]\n}]);","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true,"type":"Boolean"},"quickDesc":{"value":true,"altValue":true,"type":"Boolean"},"quickProperties":{"value":true,"altValue":true,"type":"Boolean"},"quickVersatile":{"value":false,"altValue":false,"type":"Boolean"},"quickFlavor":{"value":true,"altValue":true,"type":"Boolean"},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"scene-packer":{"sourceId":"Item.cPtAHTGJG44HguJX"},"cf":{"id":"temp_5o7edvfx9a","color":"#000000"}}}
{"_id":"H3EpTXtnlgTpxZTi","name":"Dragon Slayer Longsword MQ0.8.85","type":"weapon","img":"systems/dnd5e/icons/skills/weapon_06.jpg","data":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>You gain a +1 bonus to attack and damage rolls made with this magic weapon.</p>\n<p>When you hit a dragon with this weapon, the dragon takes an extra 3d6 damage of the weapon's type. For the purpose of this weapon, \"dragon\" refers to any creature with the dragon type, including dragon turtles and wyverns.</p>","chat":"","unidentified":""},"source":"DMG pg. 166","quantity":1,"weight":3,"price":8000,"attunement":2,"equipped":false,"rarity":"rare","identified":true,"activation":{"type":"action","cost":1,"condition":"\"@raceOrType\".includes(\"dragon\") && item.attunement !== 1"},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":5,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"1","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8 + @mod +1","slashing"]],"versatile":""},"formula":"3d6","save":{"ability":"","dc":null,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":true,"ada":false,"mgc":true,"sil":false,"nodam":false,"fulldam":false,"halfdam":false,"critOther":true},"proficient":true,"attributes":{"spelldc":10}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.items.SXjs8JghAPBv7d6j"},"midi-qol":{"onUseMacroName":"","criticalThreshold":"20","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Dragon Slayer Longsword MQ 0.8.55","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_bf8mj8lxpvb","color":"#000000"}}}
{"_id":"IY6MqwoMBYW6HKCf","name":"Longsword of Life Stealing MQ0.8.85","type":"weapon","img":"systems/dnd5e/icons/skills/violet_24.jpg","data":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>When you attack a creature with this magic weapon and roll a 20 on the attack roll, that target takes an extra 3d6 necrotic damage, provided that the target isn't a construct or an undead. You gain temporary hit points equal to the extra damage dealt.</p>","chat":"","unidentified":""},"source":"DMG pg. 206","quantity":1,"weight":3,"price":1000,"attunement":2,"equipped":false,"rarity":"rare","identified":true,"activation":{"type":"action","cost":1,"condition":"@workflow.diceRoll === 20 && !([\"construct\", \"undead\"].includes(\"@raceOrType\")) && item.attunement !== 1"},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8 +@mod","slashing"]],"versatile":"1d10 + @mod"},"formula":"3d6[necrotic]","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":true,"ada":false,"mgc":false,"sil":false,"nodam":false,"fulldam":false,"halfdam":false,"critOther":false},"proficient":true,"attributes":{"spelldc":10}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"midi-qol":{"criticalThreshold":"20","onUseMacroName":"ItemMacro","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.dnd5e.items.wtctR6tCcYbQPiS0"},"itemacro":{"macro":{"data":{"_id":null,"name":"Longsword of Life Stealing MQ0.8.85","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].diceRoll === 20 && args[0].itemData.data.attunement !== 1 && args[0].otherDamageTotal > (actor.data.data.attributes.hp.temp ?? 0)) {\n    await actor.update({\"data.attributes.hp.temp\": args[0].otherDamageTotal})\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_bf8mj8lxpvb","color":"#000000"}}}
{"_id":"JJYhn1SqoMGGKUyO","name":"Invisibility","type":"spell","img":"systems/dnd5e/icons/spells/fog-sky-2.jpg","data":{"description":{"value":"<p>A creature you touch becomes invisible until the spell ends. Anything the target is wearing or carrying is invisible as long as it is on the target's person. The spell ends for a target that attacks or casts a spell.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, you can target one additional creature for each slot level above 2nd.</p>\n<p>&nbsp;</p>\n<p>* This verison of inviisbility uses conditional visibility and works with midi-qol concentration</p>","chat":"","unidentified":""},"source":"PHB pg. 254","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"ill","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"An eyelash encased in gum arabic","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""},"attributes":{"spelldc":10}},"effects":[{"_id":"GoUSbGdrl7G0I89N","flags":{"dae":{"stackable":false,"specialDuration":["1Attack"],"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null}},"changes":[{"key":"macro.ConditionalVisibility","value":"invisible","mode":0,"priority":20},{"key":"flags.midi-qol.advantage.attack.all","value":"1","mode":0,"priority":20}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/spells/fog-sky-2.jpg","label":"Invisible","origin":"Actor.Y7foSiLRLo7ysFr9.OwnedItem.MtbkgRT7nopCAnpB","tint":null,"transfer":false}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"midi-qol":{"onUseMacroName":""},"core":{"sourceId":"Item.MtbkgRT7nopCAnpB"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"cf":{"id":"temp_5o7edvfx9a","color":"#000000"}}}
{"_id":"JPmBscL7iyYfytWd","name":"Rakish Audacity","type":"feat","img":"systems/dnd5e/icons/skills/violet_27.jpg","data":{"description":{"value":"<p>Beginning at 1st level, you know how to strike subtly and exploit a foe's distraction. Once per turn, you can deal an extra [[/r 1d6]] damage to one creature you hit with an attack if you have advantage on the attack roll. The attack must use a finesse or a ranged weapon.</p>\n<p>You don't need advantage on the attack roll if another enemy of the target is within 5 feet of it, that enemy isn't&nbsp;<a href=\"https://5e.tools/conditionsdiseases.html#incapacitated_phb\">incapacitated</a>, and you don't have disadvantage on the attack roll.</p>\n<p>The amount of the extra damage increases as you gain levels in this class, as shown in the Sneak Attack column of the Rogue table.</p>\n<p>&nbsp;</p>\n<p>V1.0</p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Rogue 1","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"effects":[{"_id":"Ns5pHr7gcYPTJ7HU","flags":{"dae":{"stackable":false,"transfer":true,"specialDuration":["None"],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"}},"changes":[{"key":"flags.dnd5e.DamageBonusMacro","value":"ItemMacro.Rakish Audacity","mode":0,"priority":20},{"key":"data.attributes.init.total","value":"@abilities.cha.mod","mode":2,"priority":20},{"key":"data.attributes.init.mod","value":"@abilities.cha.mod","mode":2,"priority":20}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/violet_27.jpg","label":"Rakish Audacity","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.qgNwoSwmcF8DkhNy","tint":null,"transfer":true}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"storm-kings-thunder","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Rakish Audacity","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].hitTargets.length < 1) return;\nMidiQOL.warn(`Checking sneak attack for ${args[0].actor.name}`);\nif (args[0].item.data.actionType === \"mwak\" && !args[0].item.data.properties?.fin) \n  return {}; // ranged or finesse\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nconst rogueLevels = actor.getRollData().classes.rogue?.levels;\nif (!rogueLevels) {\n  MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n  return {}; // rogue only\n}\nlet target = canvas.tokens.get(args[0].hitTargets[0].id ?? args[0].hitTargers[0]._id);\n\nif (game.combat) {\n  const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n  const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n   return {};\n  }\n}\nlet isSneak = args[0].advantage;\nlet foundEnemy = true; // used to flag if hostile or neutrals surround target\nif (!isSneak) {\n  foundEnemy = false;\n  let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n    let nearby = (t.actor &&\n         t.actor?.id !== args[0].actor._id && // not me\n         t.id !== target.id && // not the target\n         t.actor?.data.data.attributes?.hp?.value > 0 && // not incapacitated\n         t.data.disposition !== target.data.disposition && // not an ally\n         MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n     );\n\n    foundEnemy = foundEnemy || (nearby && t.data.disposition === -target.data.disposition)\n    return nearby;\n  });\n  isSneak = nearbyEnemy.length>0;\n}\nif (!isSneak) {    // rakish audactity checkNearby\n    let totalNearbyToMe = MidiQOL.findNearby(null, token, 5, 9).length;\n    let distanceToTarget = MidiQOL.getDistance(target,token, false);\n    const rakish = !args[0].disadvantage && totalNearbyToMe === 1 && distanceToTarget <= 5;\n    if (rakish) {\n        foundEnemy = true; // don't display the neutrals warning\n        isSneak = true;\n    }\n}\nif (!isSneak) {\n    MidiQOL.warn(`${args[0].name} Not a sneak attack`);\n    return {};\n}\nlet useSneak = getProperty(actor.data, \"flags.dae.autoSneak\");\nif (!useSneak) {\n    let dialog = new Promise((resolve, reject) => {\n      new Dialog({\n      // localize this text\n      title: \"Conditional Damage\",\n      content: `<p>Use Sneak attack?</p>` + (!foundEnemy?\"<p> Only Nuetral creatures nearby</p>\":\"\"),\n      buttons: {\n          one: {\n              icon: '<i class=\"fas fa-check\"></i>',\n              label: \"Confirm\",\n              callback: () => resolve(true)\n          },\n          two: {\n              icon: '<i class=\"fas fa-times\"></i>',\n              label: \"Cancel\",\n              callback: () => {resolve(false)}\n          }\n      },\n      default: \"two\"\n      }).render(true);\n    });\n    useSneak = await dialog;\n}\nif (!useSneak) return {}\nconst diceMult = args[0].isCritical ? 2: 1;\nconst baseDice = Math.ceil(rogueLevels/2);\nif (game.combat) {\n  const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n  const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n  if (combatTime !== lastTime) {\n     await actor.setFlag(\"midi-qol\", \"sneakAttackTime\", combatTime)\n  }\n}\n\n// How to check that we've already done one this turn?\nreturn {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.FkeL8Qyuy8EE8oGD"},"favtab":{"isFavorite":false},"betterRolls5e":{"critRange":{"value":null,"type":"String"},"critDamage":{"value":"","type":"String"},"quickDesc":{"value":true,"altValue":true,"type":"Boolean"},"quickProperties":{"value":true,"altValue":true,"type":"Boolean"},"quickOther":{"value":true,"altValue":true,"type":"Boolean","context":""},"quickFlavor":{"value":true,"altValue":true,"type":"Boolean"},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":false},"altValue":{"use":true,"resource":true,"charge":false}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"midi-qol":{"onUseMacroName":""},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"MU0ER6EGUdJU8xIj","name":"Mace of Disruption MQ0.8.85","type":"weapon","img":"systems/dnd5e/icons/skills/light_06.jpg","data":{"description":{"value":"<p>(<em>Requires attunement</em>)</p>\n<p>When you hit a fiend or an undead with this magic weapon, that creature takes an extra 2d6 radiant damage. If the target has 25 hit points or fewer after taking this damage, it must succeed on a DC 15 Wisdom saving throw or be destroyed. On a successful save, the creature becomes frightened of you until the end of your next turn.</p>\n<p>While you hold this weapon, it sheds bright light in a 20-foot radius and dim light for an additional 20 feet.</p>\n<p>Midi-qol: Requires Convenient Effects for application of Frightened - you can change it to CUB by editing the active effect.</p>","chat":"","unidentified":""},"source":"DMG pg. 179","quantity":1,"weight":4,"price":null,"attunement":2,"equipped":false,"rarity":"rare","identified":true,"activation":{"type":"action","cost":1,"condition":"[\"fiend\", \"undead\"].includes('@raceOrType')  && @item.attunement !== 1"},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":5,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d6 + @mod","bludgeoning"]],"versatile":""},"formula":"2d6","save":{"ability":"wis","dc":15,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":false,"mgc":false,"ada":false,"sil":false,"nodam":false,"fulldam":true,"halfdam":false,"critOther":false},"proficient":false,"attributes":{"spelldc":10}},"effects":[{"_id":"a9mFBJjGO0O0a3tJ","changes":[{"key":"StatusEffect","mode":0,"value":"Convenient Effect: Frightened","priority":"20"}],"disabled":false,"duration":{"rounds":99,"startTime":null},"icon":"systems/dnd5e/icons/skills/light_06.jpg","label":"Frightened","origin":"Item.R2r65P2T5gTTUO2R","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["turnEndSource"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"StatusEffect"},{"_id":"vMRAlkC9HOcdIY18","changes":[{"key":"ATL.brightLight","mode":4,"value":"20","priority":"20"},{"key":"ATL.dimLight","mode":4,"value":"40","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/light_06.jpg","label":"Mace of Disruption","origin":"Item.k7ObEq184E1MthES","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["ATL.brightLight","ATL.dimLight"]}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"magicitems":{"charges":"0","chargeType":"c1","recharge":"0","rechargeType":"t1","rechargeUnit":"r1","enabled":false,"destroy":false,"rechargeable":false,"equipped":false,"attuned":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","sorting":"l"},"midi-qol":{"criticalThreshold":"20","onUseMacroName":"","effecActivation":"[\"fiend\", \"undead\"].includes(\"@raceOrType\")","effectActivation":true},"core":{"sourceId":"Item.R2r65P2T5gTTUO2R"},"scene-packer":{"sourceId":"Item.k7ObEq184E1MthES"},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickSave":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_bf8mj8lxpvb","color":"#000000"}}}
{"_id":"NMrXG3xUYQoNuIiF","name":"Divine Smite MQ0.8.9","type":"spell","img":"systems/dnd5e/icons/skills/light_05.jpg","data":{"description":{"value":"<p>Starting at 2nd Level, when you hit a creature with a melee weapon Attack, you can expend one spell slot to deal radiant damage to the target, in addition to the weapon’s damage.</p>\n                                                                                                                <p>The extra damage is 2d8 for a 1st-level spell slot, plus 1d8 for each Spell Level higher than 1st, to a maximum of 5d8.</p>\n                                                                                                                <p>The damage increases by 1d8 if the target is an Undead or a fiend, to a maximum of 6d8.</p>\n                                                                                                                <p> </p>\n                                                                                                                <p>This item uses the \"item macro\" feature where the macro that does the rolling is bound to the item. If you want to edit the macro you need to have the item macros module installed, but it is not required to just use the item.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":5,"long":5,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"con","components":{"value":"","vocal":false,"somatic":false,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":false},"scaling":{"mode":"none","formula":""},"spellType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"concentration":{"value":null,"_deprecated":true},"ritual":{"value":null,"_deprecated":true},"attributes":{"spelldc":10}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"dynamiceffects":{"effects":[{"modSpecKey":"macro.itemMacro","value":"@target @item.level @item","mode":"+","targetSpecific":false,"id":1,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[]},{"modSpecKey":"macro.tokenMagic","value":"fumes","mode":"+","targetSpecific":false,"id":2,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[],"label":"Macro TokenMagic"}],"equipActive":false,"alwaysActive":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"critRange":{"value":""},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true,"context":""},"quickFlavor":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false}},"favtab":{"isFavourite":true,"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Divine Smite MQ0.8.9","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"let target = canvas.tokens.get(args[0].hitTargets[0]?._id);\nlet improvedDivineSmite = args[0].actor.items.find(i=> i.name ===\"Improved Divine Smite\");\nlet numDice = 1 + args[0].spellLevel;\nif (numDice > 6) numDice = 6;\nif (improvedDivineSmite) numDice += 1;\nlet undead = [\"undead\", \"fiend\"].some(type => (target?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\nif (undead) numDice += 1;\nif (args[0].isCritical) numDice = numDice * 2;\nlet damageRoll = new Roll(`${numDice}d8`).roll();\n// if (args[0].isCritical) damageRoll = MidiQOL.doCritModify(damageRoll)\nnew MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"radiant\", target ? [target] : [], damageRoll, {flavor: \"Divine Smite - Damage Roll (Radiant)\", itemCardId: args[0].itemCardId})","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"mess":{"templateTexture":""},"dae":{"alwaysActive":false,"activeEquipped":false},"midi-qol":{"onUseMacroName":"ItemMacro"},"core":{"sourceId":"Item.pJKe8oNZdJSKtbcu"},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardSelf":true,"marker":true,"markerColor":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":25},"item":{"enableAudio":false,"file":"","delay":100,"volume":25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"PqGskEAogEdIcjO7","name":"Aura of Devotion MQ0.8.85","type":"feat","img":"icons/svg/holy-shield.svg","data":{"description":{"value":"<p>Starting at 7th level, you and friendly creatures within 10 feet of you can’t be Charmed while you are conscious.</p>\n<p>At 18th level, the range of this aura increases to 30 feet.</p>\n<p> </p>\n<p>Midi-qol: requires Active Auras to function</p>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":0,"per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Paladin 7","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10}},"effects":[{"_id":"ZBApXapUUQs7zxcY","flags":{"dae":{"transfer":true,"stackable":"none","macroRepeat":"none","specialDuration":[]},"ActiveAuras":{"isAura":true,"aura":"Allies","radius":10,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"changes":[{"key":"data.traits.ci.value","mode":0,"value":"charmed","priority":"0"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/svg/holy-shield.svg","label":"Aura of Devotion","origin":"Actor.FzHGnPGyw01MRHXm.OwnedItem.xg9wUjBkucmDonBr","transfer":true,"tint":null,"selectedKey":"data.traits.ci.value"}],"folder":null,"sort":0,"permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"flags":{"dynamiceffects":{"effects":[{"modSpecKey":"data.traits.ci.value","value":"charmed","mode":"+","id":0,"itemId":"","active":false}],"alwaysActive":true,"equipActive":false},"dae":{"alwaysActive":true,"activeEquipped":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.aEylhD8RBdXR9eUA"},"scene-packer":{"sourceId":"Item.aEylhD8RBdXR9eUA"},"betterRolls5e":{"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"cf":{"id":"temp_ldurt0p3e8","folderPath":[],"color":"#000000","fontColor":"#FFFFFF","name":"Features","children":[],"icon":""}},"_id":"PsnhHd1YDABUxstD"}
{"_id":"S3S7loH9jwoX4nHT","name":"Rage MQ0.8.9","type":"feat","img":"systems/dnd5e/icons/skills/red_10.jpg","data":{"description":{"value":"<p>In battle, you fight with primal ferocity. On your turn, you can enter a rage as a bonus action.&nbsp;While raging, you gain the following benefits if you aren't wearing heavy armor:</p>\n<ul>\n<li>\n<p>You have advantage on Strength checks and Strength saving throws.</p>\n</li>\n<li>\n<p>When you make a melee weapon attack using Strength, you gain a bonus to the damage roll that increases as you gain levels as a barbarian, as shown in the Rage Damage column of the Barbarian table.</p>\n</li>\n<li>\n<p>You have resistance to bludgeoning, piercing, and slashing damage.</p>\n</li>\n</ul>\n<p>If you are able to cast spells, you can't cast them or concentrate on them while raging.&nbsp;</p>\n<p>Your rage lasts for 1 minute. It ends early if you are knocked unconscious or if your turn ends and you haven't attacked a hostile creature since your last turn or taken damage since then. You can also end your rage on your turn as a bonus action.&nbsp;</p>\n<p>Once you have raged the number of times shown for your barbarian level in the Rages column in the table below, you must finish a long rest before you can rage again.</p>\n<p><em style=\"box-sizing: border-box; user-select: text; color: #191813; font-size: 13px;\">**Foundry note: Note the limited uses is set to the base default of 2. Please manually adjust as required.</em></p>\n<table style=\"width: 286px; height: 170px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\"><strong>Barbarian Level</strong></td>\n<td style=\"width: 68px; height: 17px;\"><strong>Rages</strong></td>\n<td style=\"width: 96px; height: 17px;\"><strong>Rage Damage</strong></td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">1st</td>\n<td style=\"width: 68px; height: 17px;\">2</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">2nd</td>\n<td style=\"width: 68px; height: 17px;\">2</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">3rd</td>\n<td style=\"width: 68px; height: 17px;\">3</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">4th</td>\n<td style=\"width: 68px; height: 17px;\">3</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">5th</td>\n<td style=\"width: 68px; height: 17px;\">3</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">6th</td>\n<td style=\"width: 68px; height: 17px;\">4</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">7th</td>\n<td style=\"width: 68px; height: 17px;\">4</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">8th</td>\n<td style=\"width: 68px;\">4</td>\n<td style=\"width: 96px;\">+2</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">9th</td>\n<td style=\"width: 68px;\">4</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">10th</td>\n<td style=\"width: 68px;\">4</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">11th</td>\n<td style=\"width: 68px;\">4</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">12th</td>\n<td style=\"width: 68px;\">5</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">13th</td>\n<td style=\"width: 68px;\">5</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">14th</td>\n<td style=\"width: 68px;\">5</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">15th</td>\n<td style=\"width: 68px; height: 17px;\">5</td>\n<td style=\"width: 96px; height: 17px;\">+3</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">16th</td>\n<td style=\"width: 68px; height: 17px;\">5</td>\n<td style=\"width: 96px; height: 17px;\">+4</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">17th</td>\n<td style=\"width: 68px;\">6</td>\n<td style=\"width: 96px;\">+4</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">18th</td>\n<td style=\"width: 68px;\">6</td>\n<td style=\"width: 96px;\">+4</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">19th</td>\n<td style=\"width: 68px; height: 17px;\">6</td>\n<td style=\"width: 96px; height: 17px;\">+4</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">20th</td>\n<td style=\"width: 68px; height: 17px;\">Unlimited</td>\n<td style=\"width: 96px; height: 17px;\">+4</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>","chat":"","unidentified":""},"source":"PHB pg. 48","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"2","per":"lr","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Barbarian 1","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{"amm":false,"fin":false,"fir":false,"foc":false,"hvy":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":false}},"effects":[{"_id":"eWhL8hUr0c2ujDUm","flags":{"dae":{"stackable":false,"specialDuration":[],"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null}},"changes":[{"key":"data.traits.dr.value","value":"slashing","mode":2,"priority":20},{"key":"data.traits.dr.value","value":"piercing","mode":2,"priority":20},{"key":"data.traits.dr.value","value":"bludgeoning","mode":2,"priority":20},{"key":"flags.midi-qol.advantage.ability.save.str","value":"1","mode":0,"priority":20},{"key":"flags.midi-qol.advantage.ability.check.str","value":"1","mode":0,"priority":20},{"key":"flags.dnd5e.DamageBonusMacro","value":"ItemMacro.Rage","mode":0,"priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"systems/dnd5e/icons/skills/red_10.jpg","label":"Rage","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.3YrB0pvLXwJXGGt2","tint":null,"transfer":false}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"core":{"sourceId":"Item.C2lYHOGH2UpEifk7"},"exportSource":{"world":"kobold-cauldron","system":"dnd5e","coreVersion":"0.7.7","systemVersion":"1.1.1"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Rage","type":"script","author":"g4WGw0lAZ3nIhapn","img":"icons/svg/dice-target.svg","scope":"global","command":"const levels = args[0].rollData.classes?.barbarian?.levels ?? 0;\nif (!levels) return {};\nif (!args[0].item) return {};\nconst tactor = canvas.tokens.get(args[0].tokenId).actor;\nconst titem = tactor.items.get(args[0].item._id);\nconst rollMod = titem.abilityMod;\nif (rollMod !== \"str\") return {};\nconst bonus = levels < 9 ? \"2\" : (levels < 16 ? \"3\" : \"4\");\nreturn {damageRoll: bonus, flavor: \"Rage Damage\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":false},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"cf":{"id":"temp_5o7edvfx9a","folderPath":[],"color":"#000000","fontColor":"#FFFFFF","name":"Spells","children":[],"icon":""}},"_id":"Sb4GQz0wy9eHCxb6"}
{"_id":"Td3v4mqUETTolcm0","name":"Nature's Ward","type":"feat","img":"systems/dnd5e/icons/skills/nature_02.jpg","data":{"description":{"value":"<p>When you reach 10th level, you can't be charmed or frightened by elementals or fey, and you are immune to poison and disease.</p>","chat":"","unidentified":""},"source":"PHB pg. 69","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Circle of the Land 10","recharge":{"value":null,"charged":false},"attributes":{"spelldc":10}},"effects":[{"_id":"RZ2jmcmhFX8uMrPN","flags":{"dae":{"stackable":false,"specialDuration":[],"macroRepeat":"none","transfer":true},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null}},"changes":[{"key":"data.traits.ci.value","value":"diseased","mode":2,"priority":20},{"key":"data.traits.ci.value","value":"poisoned","mode":2,"priority":20},{"key":"data.traits.di.value","value":"poison","mode":2,"priority":20}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/nature_02.jpg","label":"Nature's Ward","origin":"Item.UWivBxTGcLzlnY8G","tint":null,"transfer":true}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"VdyUWgf9WlQYlEKl","name":"Greatsword of Wounding","type":"weapon","img":"systems/dnd5e/icons/skills/affliction_01.jpg","data":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>Hit points lost to this weapon's damage can be regained only through a short or long rest, rather than by regeneration, magic, or any other means.</p>\n<p>Once per turn, when you hit a creature with an attack using this magic weapon, you can wound the target. At the start of each of the wounded creature's turns, it takes 1d4 necrotic damage for each time you've wounded it, and it can then make a DC 15 Constitution saving throw, ending the effect of all such wounds on itself on a success. Alternatively, the wounded creature, or a creature within 5 feet of it, can use an action to make a DC 15 Wisdom (Medicine) check, ending the effect of such wounds on it on a success.<br /><br />This version uses an item amcro and enforces the once per turn rule.</p>","chat":"","unidentified":""},"source":"DMG pg. 207","quantity":1,"weight":6,"price":2000,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":null,"damage":{"parts":[["2d6 + @mod","slashing"]],"versatile":""},"formula":"1d4","save":{"ability":"con","dc":15,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":true,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":true,"ver":false,"ada":false,"mgc":false,"sil":false,"nodam":false,"fulldam":false,"halfdam":false,"critOther":false},"proficient":true,"attributes":{"spelldc":10}},"effects":[{"_id":"BqzfX8p9NqtZ1Qxx","changes":[{"key":"macro.itemMacro","mode":0,"value":"0","priority":"20"}],"disabled":false,"duration":{"rounds":99,"startTime":null},"icon":"systems/dnd5e/icons/skills/affliction_01.jpg","label":"Wounded","origin":"Item.W4NUvzHSxGWmNa8Z","transfer":false,"flags":{"dae":{"stackable":"count","macroRepeat":"startEveryTurn","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.items.JpwuGtFkfrGibQpP"},"itemacro":{"macro":{"data":{"_id":null,"name":"Greatsword of Wounding","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"//\nconst lastArg = args[args.length - 1];\nlet ttoken = await fromUuid(lastArg.tokenUuid);\nconst tactor = ttoken?.actor;\nconst item = await fromUuid(lastArg.origin);\nif (args[0] === \"on\") {\n  const sourceActor = item.parent;\n\n  const combatTime = game.combat.round + game.combat.turn / 100;\n  const lastTime = getProperty(sourceActor.data.flags, \"midi-qol.woundedTime\");\n  lastArg.canWound = !game.combat || (combatTime !== lastTime);\n  if (game.combat && lastArg.canWound) {\n    let combatTime = game.combat.round + game.combat.turn / 100;\n    let lastTime = getProperty(sourceActor.data.flags, \"midi-qol.woundedTime\");\n    if (combatTime !== lastTime) {\n      setProperty(sourceActor.data.flags, \"midi-qol.woundedTime\", combatTime)\n    }\n  } \n  if (!lastArg.canWound) {\n    const stacks = getProperty(lastArg.efData, \"flags.dae.stacks\") || 1;\n    const label = lastArg.efData.label.replace(/\\s+\\(\\d*\\)/, \"\") +` (${stacks - 1})`;\n    Hooks.once(\"midi-qol.RollComplete\", () => {\n    tactor.updateEmbeddedDocuments(\"ActiveEffect\", [{ _id: lastArg.efData._id, \"flags.dae.stacks\": stacks - 1, \"label\": label }]);\n    });\n  }\n} else if (args[0] === \"each\") {\n  const woundCount = getProperty(lastArg.efData, \"flags.dae.stacks\");\n  if (!woundCount) return;\n  const saveType = \"con\";\n  const DC = 15;\n  const flavor = `${CONFIG.DND5E.abilities[saveType]} DC${DC} ${item?.name || \"\"}`;\n  let save = (await tactor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\n  if (save >= DC) {\n    const effectsToDelete = tactor.effects.filter(ef => ef.data.origin === lastArg.origin).map(ef => ef.id);\n    ChatMessage.create({content: \"Save was made\"});\n    await MidiQOL.socket().executeAsGM(\"removeEffects\", { actorUuid: tactor.uuid, effects: [lastArg.effectId] })\n  } else {\n    let damageRoll = new Roll(`${woundCount}d4[necrotic]`).roll(); // could be argument\n    new MidiQOL.DamageOnlyWorkflow(tactor, ttoken, damageRoll.total, \"necrotic\", [ttoken], damageRoll, { flavor: `Failed Save for ${item.name}`, itemData: item?.toObject(), itemCardId: \"new\", useOther: true })\n  }\n} else if (args[0] === \"off\") {\n  // do any clean up\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"","criticalThreshold":"20"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_bf8mj8lxpvb","color":"#000000"}}}
{"_id":"VqY658X1ZtbtvyRN","name":"Hold Person 0.8.52","type":"spell","img":"systems/dnd5e/icons/spells/shielding-eerie-2.jpg","data":{"description":{"value":"<p>Choose a humanoid that you can see within range. The target must succeed on a Wisdom saving throw or be paralyzed for the duration. At the end of each of its turns, the target can make another Wisdom saving throw. On a success, the spell ends on the target.</p>\n<p><strong>Higher Levels. </strong>When you cast this spell using a spell slot of 3rd level or higher, you can target one additional humanoid for each slot level above 2nd. The humanoids must be within 30 feet of each other when you target them.<br /><br />Assumes Convenient Effects</p>","chat":"","unidentified":""},"source":"PHB pg. 251","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"spell"},"level":2,"school":"enc","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"A small, straight piece of iron","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""}},"effects":[{"_id":"t3cxabtojf2E7WRI","changes":[{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=end,\nsaveAbility=wis,\nsaveDC=@attributes.spelldc,\nlabel=Hold Person","priority":"20"},{"key":"macro.CE","mode":0,"value":"Paralyzed","priority":"20"}],"disabled":false,"duration":{"rounds":1,"startTime":null},"icon":"systems/dnd5e/icons/spells/shielding-eerie-2.jpg","label":"Hold Person","origin":"Item.fTpCyyR0tWfOR0S3","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.abilities.cha.dc","macro.CE"]}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.3Lo9boi7P2ro6QV4"},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false},"midi-qol":{"onUseMacroName":""},"cf":{"id":"temp_5o7edvfx9a","color":"#000000"}}}
{"_id":"VzPRAJvUrYCv1xo8","name":"Uncanny Dodge","type":"feat","img":"systems/dnd5e/icons/skills/armor_01.jpg","data":{"description":{"value":"<p>Starting at 5th level, when an attacker that you can see hits you with an attack, you can use your reaction to halve the attack's damage against you.</p>","chat":"","unidentified":""},"source":"PHB pg. 96","activation":{"type":"reactiondamage","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Rogue 5","recharge":{"value":null,"charged":false}},"effects":[{"_id":"ksFos60cgn0TWTFP","changes":[{"key":"flags.midi-qol.uncanny-dodge","mode":5,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/armor_01.jpg","label":"1/2 Damage","origin":"Item.eEmSsq7xE3i0EyBS","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":["1Reaction"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.abilities.cha.dc"}],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.Mm64SKAHJWYecgXS"},"betterRolls5e":{"critRange":{"type":"String","value":null},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":true},"altValue":{"use":true,"resource":true,"charge":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"bsSjL7k9wYycpHA8","name":"Banishment","type":"spell","img":"systems/dnd5e/icons/spells/link-eerie-3.jpg","data":{"description":{"value":"<p>You attempt to send one creature that you can see within range to another plane of existence. The target must succeed on a Charisma saving throw or be banished.</p>\n<p>If the target is native to the plane of existence you're on, you banish the target to a harmless demiplane. While there, the target is incapacitated. The target remains there until the spell ends, at which point the target reappears in the space it left or in the nearest unoccupied space if that space is occupied.</p>\n<p>If the target is native to a different plane of existence than the one you're on, the target is banished with a faint popping noise, returning to its home plane. If the spell ends before 1 minute has passed, the target reappears in the space it left or in the nearest unoccupied space if that space is occupied. Otherwise, the target doesn't return.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 5th level or higher, you can target one additional creature for each slot level above 4th.</p>","chat":"","unidentified":""},"source":"PHB pg. 217","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"cha","dc":16,"scaling":"spell","value":""},"level":4,"school":"abj","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"An item distasteful to the target","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"effects":[{"_id":"iufZU12yslQQSskX","flags":{"dae":{"transfer":false,"stackable":false,"specialDuration":[],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null}},"changes":[{"key":"macro.itemMacro","value":"@target","mode":0,"priority":0}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/spells/link-eerie-3.jpg","label":"Banishment","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.cPJGG9KDdaYy3RTU","tint":null,"transfer":false}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"dynamiceffects":{"equipActive":true,"alwaysActive":false,"effects":[{"modSpecKey":"macro.execute","value":"Banishment @target","mode":"+","targetSpecific":false,"id":1,"itemId":"pz0vjFCdPtQkdKKQ","active":true,"_targets":[],"label":"Macro Execute"}]},"betterRolls5e":{"critRange":{"type":"String","value":null},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":false},"altValue":{"use":false,"resource":false}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"dae":{"alwaysActive":false,"activeEquipped":true},"core":{"sourceId":"Item.BcZKJ53HIIPkOPeD"},"midi-qol":{"onUseMacroName":""},"itemacro":{"macro":{"_data":{"name":"Banishment","type":"script","scope":"global","command":"let target = canvas.tokens.get(args[1]);\n\nif (args[0] === \"on\") {\n    await target.update({hidden : true});\n    await target.actor.setFlag('world','banishment', 1);\n    ChatMessage.create({content: target.name + \"  was banished\"})\n    \n}\nif(args[0]=== \"off\") {\n target.update({hidden : false})\n target;actor.unsetFlag(args[1], 'world', 'banishment');\n ChatMessage.create({content: target.name + \"  returned\"})\n}","author":"devnIbfBHb74U9Zv"},"data":{"name":"Banishment","type":"script","scope":"global","command":"let target = canvas.tokens.get(args[1]);\n\nif (args[0] === \"on\") {\n    await target.update({hidden : true});\n    await target.actor.setFlag('world','banishment', 1);\n    ChatMessage.create({content: target.name + \"  was banished\"})\n    \n}\nif(args[0]=== \"off\") {\n target.update({hidden : false})\n target.actor.unsetFlag('world', 'banishment');\n ChatMessage.create({content: target.name + \"  returned\"})\n}","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}},"favtab":{"isFavorite":false},"cf":{"id":"temp_5o7edvfx9a","color":"#000000"}}}
{"_id":"c9OSXfLd170kf3hS","name":"Fleet of Foot","type":"feat","img":"systems/dnd5e/icons/items/equipment/boots-plain.jpg","data":{"description":{"value":"<h3><p><small><em>Race: Wood Elf</em></small></p><p><p>Your base walking speed increase<span>s to 35 feet.</span></p></p>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Race: Wood Elf","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10}},"effects":[{"_id":"xSoG3K2m1roXbzcS","flags":{"dae":{"transfer":true,"stackable":false,"specialDuration":[],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null}},"changes":[{"key":"data.attributes.movement.walk","value":"35","mode":4,"priority":5}],"disabled":false,"duration":{"startTime":null},"icon":"icons/svg/mystery-man.svg","label":"Fleet of Foot","origin":"Actor.ZaVJJWXkzU603fLE.OwnedItem.TtkLUp5AChMw5QLe","tint":null,"transfer":true}],"folder":null,"sort":0,"permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"flags":{"core":{"sheetClass":"dnd5e.DynamicItemSheet5e"},"dynamiceffects":{"effects":[{"modSpecKey":"data.attributes.speed.value","value":"35 ft","mode":"=","id":0,"itemId":"","active":false}],"alwaysActive":true,"equipActive":false},"dae":{"alwaysActive":true,"activeEquipped":false},"favtab":{"isFavorite":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"cf":{"id":"temp_bf8mj8lxpvb","color":"#000000"}}}
{"_id":"cP5iLvmJGafqZOKB","name":"Fey Ancestry","type":"feat","img":"systems/dnd5e/icons/skills/green_13.jpg","data":{"description":{"value":"<p>You have advantage on saving throws against being charmed, and magic can’t put you to sleep.</p>","chat":"","unidentified":""},"source":"PHB pg. 23, 39","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Elf, Half-Elf","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10}},"effects":[{"_id":"xztigTbGnhDHw7of","flags":{"dae":{"stackable":false,"specialDuration":[],"macroRepeat":"none","transfer":true},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null}},"changes":[{"key":"data.traits.ci.value","value":"unconscious","mode":2,"priority":20},{"key":"data.traits.languages.value","value":"elvish","mode":2,"priority":20}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/green_13.jpg","label":"Fey Ancestry","origin":"Item.NpbMHuHRuBS3ntJA","tint":null,"transfer":true}],"folder":null,"sort":0,"permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_ldurt0p3e8","color":"#000000"}}}
{"name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"cf":{"id":"temp_bf8mj8lxpvb","folderPath":[],"color":"#000000","fontColor":"#FFFFFF","name":"Items","children":[],"icon":""}},"_id":"dlPGrfXZN0JaG9sS"}
{"_id":"eZnFVMfdwvxyynm4","name":"Emboldening Bond","type":"feat","img":"icons/magic/control/silhouette-hold-change-blue.webp","data":{"description":{"value":"<p>Emboldeing Bond is not SRD so you will need to populate the text.</p>\n<p><br />Implemented:<br />Rolling the feature gives targeted tokens an effec that grants a once off bonus at the start of their turn to add 1d4 to any attack/save.check and is then removed until the start of their next turn.</p>\n<p><br />Not implemented: <br />  removal when you use the feat again (would require concentration).</p>\n<p>   needing another bondee within 30 feet (would require active auras, but it all got too hard).</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"_id":"ZjUL6z2dhutiFxRk","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":"20"}],"disabled":false,"duration":{"startTime":null,"seconds":600},"icon":"icons/magic/control/silhouette-hold-change-blue.webp","label":"Emboldening Bond","origin":"Item.Ey9NYAkSKTs0Kpva","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"startEveryTurn","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"midi-qol":{"onUseMacroName":"","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Emboldening Bond","type":"script","author":"g4WGw0lAZ3nIhapn","img":"icons/svg/dice-target.svg","scope":"global","command":"const effectData = {\n    changes: [\n        {key: \"flags.midi-qol.optional.emboldeningBond.attack\", mode: 5, value: \"1d4\", priority: \"20\"},\n        {key: \"flags.midi-qol.optional.emboldeningBond.save\", mode: 5, value: \"1d4\", priority: \"20\"},\n        {key: \"flags.midi-qol.optional.emboldeningBond.check\", mode: 5, value: \"1d4\", priority: \"20\"},\n        {key: \"flags.midi-qol.optional.emboldeningBond.label\", mode: 5, value: \"Emboldening Bond\", priority: \"20\"},\n    ],\n    disabled: false,\n    duration: {rounds: 1, seconds: undefined, startRound: undefined, startTime: undefined, startTurn: undefined, turns: undefined},\n    icon: \"icons/magic/control/silhouette-hold-change-blue.webp\",\n    label: \"Emboldening Bond Bonus\",\n    tint: null,\n    transfer: false,\n    flags: {dae : {specialDuration: [\"turnStart\"]}}\n}\n\n\nif (args[0] === \"each\" || args[0] === \"on\") {\n    token = await fromUuid(args[1].tokenUuid)\n    token.actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData])\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.Ey9NYAkSKTs0Kpva"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"fDS4UcWTAl11FxqA","name":"Lucky (Recharge)","type":"feat","img":"systems/dnd5e/icons/skills/yellow_09.jpg","data":{"description":{"value":"<p>The Luck feat is not SRD so you will have to populate the description.</p>","chat":"","unidentified":""},"source":"PHB pg. 53","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"lr","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"1d6","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Bard 1","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true}},"effects":[{"_id":"GrZ2AlujZEWCppJt","changes":[{"key":"flags.midi-qol.optional.lucky.attack","mode":5,"value":"reroll","priority":"20"},{"key":"flags.midi-qol.optional.lucky.label","mode":5,"value":"Lucky","priority":"20"},{"key":"flags.midi-qol.optional.lucky.save","mode":5,"value":"reroll","priority":"20"},{"key":"flags.midi-qol.optional.lucky.check","mode":5,"value":"reroll","priority":"20"},{"key":"flags.midi-qol.optional.lucky.count","mode":5,"value":"@resources.tertiary.value","priority":"20"},{"key":"data.resources.tertiary.label","mode":5,"value":"Luck Points","priority":"20"},{"key":"data.resources.tertiary.lr","mode":5,"value":"1","priority":"20"},{"key":"data.resources.tertiary.max","mode":5,"value":"3","priority":"20"},{"key":"flags.midi-qol.optional.lucky.skill","mode":5,"value":"reroll","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_09.jpg","label":"Lucky","origin":"Item.dQvh9dejF0s0d9nk","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.resources.tertiary.label","data.resources.tertiary.lr","data.resources.tertiary.max","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.hpLNiGq7y67d2EHA"},"midi-qol":{"onUseMacroName":"","forceCEOn":false},"betterRolls5e":{"critRange":{"type":"String","value":null},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":true},"altValue":{"use":true,"resource":true,"charge":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_ldurt0p3e8","color":"#000000"}}}
{"_id":"fqizOCaDxg0AceuQ","name":"Branding Smite","type":"spell","img":"systems/dnd5e/icons/spells/enchant-orange-2.jpg","data":{"description":{"value":"<p>The next time you hit a creature with a weapon attack before this spell ends, the weapon gleams with astral radiance as you strike. The attack deals an extra 2d6 radiant damage to the target, which becomes visible if it's invisible, and the target sheds dim light in a 5-foot radius and can't become invisible until the spell ends.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the extra damage increases by 1d6 for each slot level above 2nd.</p>\n<p>Midi-qol: Rename to Branding Smite when equipping on an actor.</p>","chat":"","unidentified":""},"source":"PHB pg. 219","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":"1d6"},"attributes":{"spelldc":10}},"effects":[{"_id":"6hAZJkE4UfjO7Adp","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Branding Smite","priority":"20"},{"key":"flags.midi-qol.brandingSmite.level","mode":5,"value":"@item.level","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/spells/enchant-orange-2.jpg","label":"Branding Smite","origin":"Compendium.midi-qol.midiqol-sample-items.dlP9fWGo3ggfkOfm","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.dnd5e.DamageBonusMacro","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"midi-qol":{"onUseMacroName":"","effectActivation":false},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"core":{"sourceId":"Item.Z2bmzJrSSmIZdOFp"},"itemacro":{"macro":{"data":{"_id":null,"name":"Branding Smite mq0.8.62","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"// v1.0. Requires midi-qol and ATL.\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; \nif (args[0].hitTargetUuids.length === 0) return {}; // did not hit anyone\nfor (let tokenUuid of args[0].hitTargetUuids) {\n    const target = await fromUuid(tokenUuid);\n    const targetActor = target.actor;\n    if (!targetActor) continue;\n    // remvoe the invisible condition\n    const effect = targetActor?.effects.find(ef=> ef.data.label===game.i18n.localize(\"midi-qol.invisible\"));\n    if (effect) await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: targetActor.uuid, effects:[effect.id]});\n    // create the dim light effect on the target\n    let bsEffect = new ActiveEffect({label: \"Branding Smite\", icon: \"systems/dnd5e/icons/spells/enchant-orange-2.jpg\", changes: [{value: 5, mode: CONST.ACTIVE_EFFECT_MODES.UPGRADE, priority: 20, key:\"ATL.dimLight\"}], duration: {seconds: 60}});\n    // 60 seconds is wrong - should look for the branding smite effect and use the remaining duration - but hey\n\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect.toObject()]})\n}\nHooks.once(\"midi-qol.RollComplete\", (workflow) => {\n    console.log(\"Deleting concentration\")\n    const effect = MidiQOL.getConcentrationEffect(actor);\n    if (effect) effect.delete();\n    return true;\n})\nconst spellLevel = actor.data.flags[\"midi-qol\"].brandingSmite.level;\nreturn{damageRoll: `${spellLevel}d6[radiant]`, flavor: \"Branding Smite\"}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"fuAqsYvnGZMH953u","name":"Shillelagh","type":"spell","img":"systems/dnd5e/icons/spells/enchant-jade-1.jpg","data":{"description":{"value":"<p>The wood of a club or quarterstaff you are holding is imbued with nature's power. For the duration, you can use your spellcasting ability instead of Strength for the attack and damage rolls of melee attacks using that weapon, and the weapon's damage die becomes a d8. The weapon also becomes magical, if it isn't already. The spell ends if you cast it again or if you let go of the weapon.</p>","chat":"","unidentified":""},"source":"PHB pg. 275","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":0,"school":"trs","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"A shamrock leaf, and a club or quarterstaff","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":false},"scaling":{"mode":"none","formula":""},"attributes":{"spelldc":10}},"effects":[{"_id":"x3I3PP0wLDynd8JN","flags":{"dae":{"transfer":false,"stackable":false,"specialDuration":[],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null}},"changes":[{"key":"macro.itemMacro","value":"","mode":0,"priority":0}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/spells/enchant-jade-1.jpg","label":"Shillelagh","origin":"Actor.ZaVJJWXkzU603fLE.OwnedItem.vtUhpbyJYzB2J9ok","tint":null,"transfer":false}],"folder":null,"sort":0,"permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"flags":{"dynamiceffects":{"equipActive":false,"alwaysActive":false,"effects":[{"modSpecKey":"macro.execute","value":"Shillelagh @target","mode":"+","targetSpecific":false,"id":1,"itemId":"HgYH1Eb3LQ19tsjJ","active":true,"_targets":[],"label":"Macro Execute"}]},"itemacro":{"macro":{"data":{"_id":null,"name":"Shillelagh","type":"script","author":"ZDFhNjE2NDMyYTY1","img":"icons/svg/dice-target.svg","scope":"global","command":"const lastArg = args[args.length - 1];\nlet tactor;\ntactor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\nlet weapons = tactor.items.filter(i => i.data.type === `weapon`);\nlet weapon_content = ``;\ndebugger;\nfor (let weapon of weapons) {\n    weapon_content += `<option value=${weapon.id}>${weapon.name}</option>`;\n}\nif (args[0] === \"on\") {\n    let content = `\n<div class=\"form-group\">\n  <label>Weapons : </label>\n  <select name=\"weapons\">\n    ${weapon_content}\n  </select>\n</div>`;\n\n    new Dialog({\n        title: \"Choose a club or quarterstaff\",\n        content,\n        buttons:\n        {\n            Ok:\n            {\n                label: `Ok`,\n                callback: (html) => {\n                    let itemId = html.find('[name=weapons]')[0].value;\n                    let weaponItem = tactor.items.get(itemId);\n                    let copy_item = duplicate(weaponItem.toObject());\n                    DAE.setFlag(tactor, `shillelagh`, {\n                        id : itemId,\n                        damage : copy_item.data.damage.parts[0][0]    \n                    });\n                    let damage = copy_item.data.damage.parts[0][0];\n                    var newdamage = damage.replace(/1d(4|6)/g,\"1d8\");\n                    copy_item.data.damage.parts[0][0] = newdamage;\n                    copy_item.data.ability = \"wis\";\n                    tactor.updateEmbeddedDocuments(\"Item\", [copy_item]);\n                    ChatMessage.create({content: copy_item.name + \" is empowered\"});\n                }\n            },\n            Cancel:\n            {\n                label: `Cancel`\n            }\n        }\n    }).render(true);\n}\n\nif (args[0] === \"off\") {\n    let flag = DAE.getFlag(tactor, `shillelagh`);\n    let weaponItem = tactor.items.get(flag.id);\n    let copy_item = duplicate(weaponItem.toObject());\n    copy_item.data.damage.parts[0][0] = flag.damage;\n    copy_item.data.ability = \"\";\n    await tactor.updateEmbeddedDocuments(\"Item\", [copy_item]);\n    DAE.unsetFlag(tactor, `shillelagh`);\n    ChatMessage.create({content: copy_item.name + \" returns to normal\"});\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"dae":{"migrated":true},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","uaStrikeType":"physical","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30},"favtab":{"isFavorite":true},"core":{"sourceId":"Item.qUrSuOAn8P3c9Jue"},"cf":{"id":"temp_5o7edvfx9a","color":"#000000"}}}
{"_id":"gdy1RdAdfga5Ad0L","name":"Longsword of Sharpness MQ0.8.85","type":"weapon","img":"systems/dnd5e/icons/skills/yellow_03.jpg","data":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>When you attack an object with this magic sword and hit, maximize your weapon damage dice against the target.</p>\n<p>When you attack a creature with this weapon and roll a 20 on the attack roll, that target takes an extra 4d6 slashing damage. Then roll another d20. If you roll a 20, you lop off one of the target's limbs, with the effect of such loss determined by the GM. If the creature has no limb to sever, you lop off a portion of its body instead.</p>\n<p>In addition, you can speak the sword's command word to cause the blade to shed bright light in a 10-foot radius and dim light for an additional 10 feet. Speaking the command word again or sheathing the sword puts out the light.</p>\n<p> </p>\n<p>MidiQOL: handles the damage. ATL handles the light effects.</p>","chat":"","unidentified":""},"source":"DMG pg. 206","quantity":1,"weight":3,"price":1700,"attunement":2,"equipped":false,"rarity":"veryRare","identified":true,"activation":{"type":"action","cost":1,"condition":"@workflow.diceRoll === 20"},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":10,"long":20,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8 + @mod","slashing"]],"versatile":"1d10 + @mod"},"formula":"4d6","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":true,"ada":false,"mgc":false,"sil":false,"nodam":false,"fulldam":false,"halfdam":false,"critOther":false},"proficient":true,"attributes":{"spelldc":10}},"effects":[{"_id":"4X2IaiMLJjtZdx6w","changes":[{"key":"ATL.dimLight","mode":2,"value":"20","priority":"20"},{"key":"ATL.brightLight","mode":2,"value":"10","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_03.jpg","label":"Light","origin":"Item.MtAhj7vLj0hWwjfz","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["StatusEffect","StatusEffect"]}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"midi-qol":{"criticalThreshold":"20","onUseMacroName":"ItemMacro","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.dnd5e.items.8MNDhKb1Q87QszOJ"},"itemacro":{"macro":{"data":{"_id":null,"name":"Longsword of Sharpness MQ0.8.85","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].diceRoll === 20 && args[0]itemData.data.attunement !== 1) {\n    const d20 = await (new Roll(\"1d20\")).roll().total;\n    if (d20 === 20) {\n        ChatMessage.create({content: \"Sword of Sharpness severed a limb\"})\n    }\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_bf8mj8lxpvb","color":"#000000"}}}
{"_id":"k5GN53YuVDiaYEyF","name":"Regeneration MQ0.8.52","type":"feat","img":"systems/dnd5e/icons/skills/red_33.jpg","data":{"description":{"value":"<section class=\"secret\"><p>The {creature} regains <strong>10 hit points</strong> at the start of its turn if it has at least <strong>1 hit point</strong>.</p></section><p>The {creature} regains <strong>10 hit points</strong> at the start of its turn.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":0,"per":null},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"heal","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"_id":"LBpB0JVv3bMLRt6L","changes":[{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=start,\ndamageRoll=10,\ndamageType=healing,\ncondition=@attributes.hp.value > 0 && @attributes.hp.value < @attributes.hp.max","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/red_33.jpg","label":"Regeneration","origin":"Item.ZjFot09sCtfAtJgi","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"StatusEffect"}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.monsterfeatures.Av7H0ymGdPeTsnwV"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_ldurt0p3e8","color":"#000000"}}}
{"_id":"n0W9Qzdhqj55TWIa","name":"Devil's Glaive MQ0.8.51","type":"weapon","img":"systems/dnd5e/icons/items/weapons/glaive.png","data":{"description":{"value":"Melee Weapon Attack: +5 to hit, reach 10 ft., one target. Hit: 8 (1d10 + 3) slashing damage. If the target is a creature other than an undead or a construct, it must succeed on a DC 12 Constitution saving throw or lose 5 (1d10) hit points at the start of each of its turns due to an infernal wound. Each time the devil hits the wounded target with this attack, the damage dealt by the wound increases by 5 (1d10). Any creature can take an action to stanch the wound with a successful DC 12 Wisdom (Medicine) check. The wound also closes if the target receives magical healing.","chat":"If the target is a creature other than an undead or a construct, it must succeed on a DC 12 Constitution saving throw or lose 5 (1d10) hit points at the start of each of its turns due to an infernal wound. Each time the devil hits the wounded target with this attack, the damage dealt by the wound increases by 5 (1d10). Any creature can take an action to stanch the wound with a successful DC 12 Wisdom (","unidentified":"Glaive"},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":10,"long":5,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"str","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d10 + 3","slashing"]],"versatile":""},"formula":"","save":{"ability":"","dc":18,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{"amm":false,"fin":false,"fir":false,"hvy":false,"lgt":false,"rch":true,"rel":false,"spc":false,"thr":false,"two":false,"ver":false,"ada":false,"foc":false,"lod":false,"mgc":false,"ret":false,"sil":false,"nodam":false,"fulldam":false,"halfdam":false,"critOther":false},"proficient":true,"recharge":{"value":null,"charged":true},"attributes":{"spelldc":10}},"effects":[{"_id":"JL0UfgqJsGSpflvT","flags":{"dae":{"stackable":"count","specialDuration":[],"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"inactive":false,"hidden":false,"height":false,"aura":"None","radius":null,"ignoreSelf":false,"alignment":"","type":"","hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"changes":[{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=end,\ndamageRoll=1d10,\ntype=slashing,\nsaveDC=12,\nsaveAbility=con,\nlabel=Infernal Wound","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":99},"icon":"systems/dnd5e/icons/items/weapons/glaive.png","label":"Infernal Wound","origin":"Actor.A4wkHpF2qMwjyP1D.Item.tfAshukITeyA5QKb","tint":null,"transfer":false,"selectedKey":"data.abilities.cha.dc"}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"midi-qol":{"onUseMacroName":"","criticalThreshold":"20","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"dae":{"activeEquipped":false,"alwaysActive":false},"itemacro":{"macro":{"_data":{"name":"Devil's Glaive (base)","type":"script","scope":"global","command":"const lastArg = args[args.length-1];\nconsole.error(\"args are \", args)\nif (args[0] === \"on\") {\n  let target = canvas.tokens.get(args[3]);\n  let flag = DAE.getFlag(target, \"infernal-wounds\") || {hookId: 0, woundCount: 0};\nconsole.error(\"fetching flag \", target.id, flag);\n  flag.woundCount = flag.woundCount + 1;\n  if (!flag.hookId) {\n    console.error(\"hookId not set\");\n    flag.hookId = Hooks.on(\"deleteActiveEffect\", (actor, effectId) => {\n      console.error(\"Resetting wound count\");\n      if (effectId === lastArg.effectId)\n        DAE.unsetFlag(tactor, \"infernal-wounds\");\n    })\n  }\nconsole.error(\"Setting flag on \", target.id, flag);\n  DAE.setFlag(target, \"infernal-wounds\", flag);\n\n} else if (args[0] === \"each\") {\n  let tactor;\n  let ttoken = canvas.tokens.get(lastArg.tokenId);\n  if (ttoken) tactor = ttoken.actor;\n  else tactor = game.actors.get(lastArg.actorId);\n  let damageItem = Item.createOwned(game.items.getName(\"Infernal Wound\"), tactor);\nconsole.error(\"created item i s\", damageItem);\n  let saveTargets = game.user.targets;\n  game.user.targets = new Set([ttoken]);\n  let hookId = Hooks.once(\"midi-qol.RollComplete\", (workflow) => {\n    if (workflow.saves.has(ttoken)) {\n      tactor.deleteEmbeddedEntity(\"ActiveEffect\", lastArg.efData._id);\n    }\n  })\n try {\n  damageItem.roll();\n  let flag = DAE.getFlag(ttoken, \"infernal-wounds\") || {hookId: 0, woundCount: 1};\nconsole.error(\"Fetched flag\", ttoken.id, flag);\n  } finally {\n   game.user.targets = saveTargets;\n  }\n} else if (args[0] === \"off\") {\n// do any clean up\n}","author":"devnIbfBHb74U9Zv"},"data":{"name":"Devil's Glaive (base)","type":"script","scope":"global","command":"const lastArg = args[args.length-1];\nconsole.error(\"args are \", args)\nif (args[0] === \"on\") {\n  let target = canvas.tokens.get(args[3]);\n  let flag = DAE.getFlag(target, \"infernal-wounds\") || {hookId: 0, woundCount: 0};\nconsole.error(\"fetching flag \", target.id, flag);\n  flag.woundCount = flag.woundCount + 1;\n  if (!flag.hookId) {\n    console.error(\"hookId not set\");\n    flag.hookId = Hooks.on(\"deleteActiveEffect\", (actor, effectId) => {\n      console.error(\"Resetting wound count\");\n      if (effectId === lastArg.effectId)\n        DAE.unsetFlag(tactor, \"infernal-wounds\");\n    })\n  }\nconsole.error(\"Setting flag on \", target.id, flag);\n  DAE.setFlag(target, \"infernal-wounds\", flag);\n\n} else if (args[0] === \"each\") {\n  let tactor;\n  let ttoken = canvas.tokens.get(lastArg.tokenId);\n  if (ttoken) tactor = ttoken.actor;\n  else tactor = game.actors.get(lastArg.actorId);\n  let damageItem = Item.createOwned(game.items.getName(\"Infernal Wound\"), tactor);\nconsole.error(\"created item i s\", damageItem);\n  let saveTargets = game.user.targets;\n  game.user.targets = new Set([ttoken]);\n  let hookId = Hooks.once(\"midi-qol.RollComplete\", (workflow) => {\n    if (workflow.saves.has(ttoken)) {\n      tactor.deleteEmbeddedEntity(\"ActiveEffect\", lastArg.efData._id);\n    }\n  })\n try {\n  damageItem.roll();\n  let flag = DAE.getFlag(ttoken, \"infernal-wounds\") || {hookId: 0, woundCount: 1};\nconsole.error(\"Fetched flag\", ttoken.id, flag);\n  } finally {\n   game.user.targets = saveTargets;\n  }\n} else if (args[0] === \"off\") {\n// do any clean up\n}","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}},"core":{"sourceId":"Item.0AgqaCUkEyZCbC5Y"},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false,"set1s":false,"set2s":false,"set3s":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickSave":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_bf8mj8lxpvb","color":"#000000"}}}
{"_id":"ne6mykbkOEID7Gsa","name":"Slayer's Prey","type":"feat","img":"systems/dnd5e/icons/skills/arrow_03.jpg","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":90,"long":90,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"1d6","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"attributes":{"spelldc":10}},"effects":[{"_id":"4YzIMnzXG4F9fNLa","flags":{"dae":{"stackable":false,"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"}},"changes":[],"disabled":false,"duration":{"startTime":null,"seconds":3600},"icon":"systems/dnd5e/icons/skills/arrow_03.jpg","label":"Marked","origin":"Actor.bZz0UNijKQidTQEV.OwnedItem.gDJIoRL1J8BzIr3y","tint":null,"transfer":false}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"onUseMacroName":"ItemMacro","effectActivation":false},"itemacro":{"macro":{"_data":{"name":"Slayer's Prey","type":"script","scope":"global","command":"// Sample Slayers prey\nif (args[0].hitTargets.length === 0) return;\nif (args[0].tag === \"OnUse\") {\n    let target = args[0].hitTargets[0]._id;\n    let actorId = args[0].actor._id; // actor who cast the spell\n    actor = game.actors.get(actorId);\n    if (!actor || !target) {\n      console.error(\"Slaters's Prey: no token/target selected\");\n      return;\n    }\n    \n    // First remove the old effects from the target and ourselves \n    let item = actor.items.get(args[0].id);\n\n    // have to remove the effect from old target if we are changing targets\n    let oldTarget = getProperty(actor.data, \"flags.midi-qol.slayersPrey\");\n    DAE.deleteActiveEffect(oldTarget, item.uuid)\n\n    // now remove it from ourselves\n    let effect = actor.effects.find(e=>e.data.origin===item.uuid);\n    console.error(\"Effect is \", effect)\n    if (effect) await actor.deleteEmbeddedEntity(\"ActiveEffect\", effect.id);\n\n    const effectData = {\n      changes: [\n        {key: \"flags.midi-qol.slayersPrey\", mode: 5, value: target, priority: 20}, // who is marked\n        {key: \"flags.dnd5e.DamageBonusMacro\", mode: 5, value: `ItemMacro.${args[0].item.name}`, priority: 20}, // macro to apply the damage\n      ],\n      origin: args[0].uuid, //flag the effect as associated to the spell being cast\n      disabled: false,\n      duration: args[0].item.effects[0].duration,\n      icon: args[0].item.img,\n      label: args[0].item.name\n    }\n    await actor.createEmbeddedEntity(\"ActiveEffect\", effectData);\n} else if (args[0].tag === \"DamageBonus\") {\n    if (args[0].hitTargets.length === 0) return;\n    let targetId = args[0].hitTargets[0]._id;\n    // only weapon attacks\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {};\n    // only on the marked target\n    if (targetId !== getProperty(args[0].actor.flags, \"midi-qol.slayersPrey\")) return {};\n    let damageType = args[0].item.data.damage.parts[0][1];\n    return {damageRoll: `1d6[${damageType}]`, flavor: \"Slayers Prey Damage\"}\n}","author":"devnIbfBHb74U9Zv"},"data":{"name":"Slayer's Prey","type":"script","scope":"global","command":"// Sample Slayers prey\nif (args[0].hitTargets.length === 0) return;\nif (args[0].tag === \"OnUse\") {\n    let target = args[0].hitTargets[0]._id;\n    let actorId = args[0].actor._id; // actor who cast the spell\n    actor = game.actors.get(actorId);\n    if (!actor || !target) {\n      console.error(\"Slaters's Prey: no token/target selected\");\n      return;\n    }\n    \n    // First remove the old effects from the target and ourselves \n    let item = actor.items.get(args[0].id);\n\n    // have to remove the effect from old target if we are changing targets\n    let oldTarget = getProperty(actor.data, \"flags.midi-qol.slayersPrey\");\n    DAE.deleteActiveEffect(oldTarget, item.uuid)\n\n    // now remove it from ourselves\n    let effect = actor.effects.find(e=>e.data.origin===item.uuid);\n    console.error(\"Effect is \", effect)\n    if (effect) await actor.deleteEmbeddedEntity(\"ActiveEffect\", effect.id);\n\n    const effectData = {\n      changes: [\n        {key: \"flags.midi-qol.slayersPrey\", mode: 5, value: target, priority: 20}, // who is marked\n        {key: \"flags.dnd5e.DamageBonusMacro\", mode: 5, value: `ItemMacro.${args[0].item.name}`, priority: 20}, // macro to apply the damage\n      ],\n      origin: args[0].uuid, //flag the effect as associated to the spell being cast\n      disabled: false,\n      duration: args[0].item.effects[0].duration,\n      icon: args[0].item.img,\n      label: args[0].item.name\n    }\n    await actor.createEmbeddedEntity(\"ActiveEffect\", effectData);\n} else if (args[0].tag === \"DamageBonus\") {\n    if (args[0].hitTargets.length === 0) return;\n    let targetId = args[0].hitTargets[0]._id;\n    // only weapon attacks\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {};\n    // only on the marked target\n    if (targetId !== getProperty(args[0].actor.flags, \"midi-qol.slayersPrey\")) return {};\n    let damageType = args[0].item.data.damage.parts[0][1];\n    return {damageRoll: `1d6[${damageType}]`, flavor: \"Slayers Prey Damage\"}\n}","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}},"core":{"sourceId":"Item.gDJIoRL1J8BzIr3y"},"favtab":{"isFavorite":false},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"oHk3aNqwdNDYphOP","name":"Flaming Sphere MQ0.8.85 + warpgate","type":"spell","img":"icons/magic/fire/orb-vortex.webp","data":{"description":{"value":"<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">A 5-foot-diameter Sphere of fire appears in an unoccupied space of your choice within range and lasts for the Duration. Any creature that ends its turn within 5 feet of the sp⁠here must make a Dexterity saving throw. The creature takes 2d6 fire damage on a failed save, or half as much damage on a successful one.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">As a Bonus Action, you can move the Sphere up to 30 feet. If you ram the sphe⁠re into a creature, that creature must make the saving throw against the sphere’s damage, and the sp⁠here stops moving this turn.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">When you move the Sphere, you can direct it over barriers up to 5 feet tall and jump it across pits up to 10 feet wide. The sp⁠here ignites flammable Objects not being worn or carried, and it sheds bright light in a 20-foot radius and dim light for an additional 20 feet.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\"><strong style=\"box-sizing:border-box;user-select:text\">At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the damage increases by 1d6 for each slot level above 2nd.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">MidiQol Will summon the flaming sphere actor (and create such an actor if one does not exist). Requies active auras, midi-qol and warpgate to work.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":2,"school":"abj","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"A bit of tallow, a pinch of brimstone, and a dusting of powdered iron","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"betterRolls5e":{"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":true},"altValue":{"use":false,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"midi-qol":{"onUseMacroName":"ItemMacro","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Flaming Sphere MQ0.8.74 + warpgate","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].tag === \"OnUse\") {\n    const casterToken = await fromUuid(args[0].tokenUuid);\n    const caster = casterToken.actor;\n    let sphereActor = game.actors.getName(\"Flaming Sphere\");\n    if (!sphereActor) {\n        const jsonData = JSON.parse('{\"name\":\"Flaming Sphere\",\"type\":\"npc\",\"img\":\"icons/magic/fire/orb-vortex.webp\",\"data\":{\"abilities\":{\"str\":{\"value\":10,\"proficient\":0},\"dex\":{\"value\":10,\"proficient\":0},\"con\":{\"value\":10,\"proficient\":0},\"int\":{\"value\":10,\"proficient\":0},\"wis\":{\"value\":10,\"proficient\":0},\"cha\":{\"value\":10,\"proficient\":0}},\"attributes\":{\"ac\":{\"flat\":10,\"calc\":\"natural\",\"formula\":\"\"},\"hp\":{\"value\":10,\"min\":0,\"max\":10,\"temp\":0,\"tempmax\":null,\"formula\":\"\"},\"init\":{\"value\":0,\"bonus\":0},\"movement\":{\"burrow\":0,\"climb\":0,\"fly\":0,\"swim\":0,\"walk\":30,\"units\":\"ft\",\"hover\":false},\"senses\":{\"darkvision\":0,\"blindsight\":0,\"tremorsense\":0,\"truesight\":0,\"units\":\"ft\",\"special\":\"\"},\"spellcasting\":\"int\",\"death\":{\"success\":0,\"failure\":0}},\"details\":{\"biography\":{\"value\":\"\",\"public\":\"\"},\"alignment\":\"\",\"race\":\"\",\"type\":{\"value\":\"\",\"subtype\":\"\",\"swarm\":\"\",\"custom\":\"\"},\"environment\":\"\",\"cr\":1,\"spellLevel\":0,\"xp\":{\"value\":10},\"source\":\"\",\"gender\":\"\",\"age\":\"\",\"height\":\"\",\"weight\":\"\",\"eyes\":\"\",\"skin\":\"\",\"hair\":\"\",\"notes1name\":\"\",\"notes2name\":\"\",\"notes3name\":\"\",\"notes4name\":\"\"},\"traits\":{\"size\":\"med\",\"di\":{\"value\":[],\"custom\":\"\"},\"dr\":{\"value\":[],\"custom\":\"\"},\"dv\":{\"value\":[],\"custom\":\"\"},\"ci\":{\"value\":[],\"custom\":\"\"},\"languages\":{\"value\":[],\"custom\":\"\"}},\"currency\":{\"pp\":0,\"gp\":0,\"ep\":0,\"sp\":0,\"cp\":0},\"skills\":{\"acr\":{\"value\":0,\"ability\":\"dex\"},\"ani\":{\"value\":0,\"ability\":\"wis\"},\"arc\":{\"value\":0,\"ability\":\"int\"},\"ath\":{\"value\":0,\"ability\":\"str\"},\"dec\":{\"value\":0,\"ability\":\"cha\"},\"his\":{\"value\":0,\"ability\":\"int\"},\"ins\":{\"value\":0,\"ability\":\"wis\"},\"itm\":{\"value\":0,\"ability\":\"cha\"},\"inv\":{\"value\":0,\"ability\":\"int\"},\"med\":{\"value\":0,\"ability\":\"wis\"},\"nat\":{\"value\":0,\"ability\":\"int\"},\"prc\":{\"value\":0,\"ability\":\"wis\"},\"prf\":{\"value\":0,\"ability\":\"cha\"},\"per\":{\"value\":0,\"ability\":\"cha\"},\"rel\":{\"value\":0,\"ability\":\"int\"},\"slt\":{\"value\":0,\"ability\":\"dex\"},\"ste\":{\"value\":0,\"ability\":\"dex\"},\"sur\":{\"value\":0,\"ability\":\"wis\"}},\"spells\":{\"spell1\":{\"value\":0,\"override\":null},\"spell2\":{\"value\":0,\"override\":null},\"spell3\":{\"value\":0,\"override\":null},\"spell4\":{\"value\":0,\"override\":null},\"spell5\":{\"value\":0,\"override\":null},\"spell6\":{\"value\":0,\"override\":null},\"spell7\":{\"value\":0,\"override\":null},\"spell8\":{\"value\":0,\"override\":null},\"spell9\":{\"value\":0,\"override\":null},\"pact\":{\"value\":0,\"override\":null}},\"bonuses\":{\"mwak\":{\"attack\":\"\",\"damage\":\"\"},\"rwak\":{\"attack\":\"\",\"damage\":\"\"},\"msak\":{\"attack\":\"\",\"damage\":\"\"},\"rsak\":{\"attack\":\"\",\"damage\":\"\"},\"abilities\":{\"check\":\"\",\"save\":\"\",\"skill\":\"\"},\"spell\":{\"dc\":\"\"}},\"resources\":{\"legact\":{\"value\":0,\"max\":0},\"legres\":{\"value\":0,\"max\":0},\"lair\":{\"value\":false,\"initiative\":0}}},\"token\":{\"_id\":\"wsnEu8ZSbBYL5S9i\",\"name\":\"Flaming Sphere\",\"displayName\":0,\"actorId\":\"WlOopcsUtThmw4gy\",\"actorLink\":false,\"actorData\":{},\"img\":\"icons/magic/fire/orb-vortex.webp\",\"tint\":null,\"width\":1,\"height\":1,\"scale\":1,\"mirrorX\":false,\"mirrorY\":false,\"x\":null,\"y\":null,\"elevation\":null,\"lockRotation\":false,\"rotation\":0,\"effects\":[],\"alpha\":1,\"hidden\":false,\"vision\":false,\"dimSight\":0,\"brightSight\":30,\"dimLight\":40,\"brightLight\":20,\"sightAngle\":0,\"lightAngle\":0,\"lightColor\":\"#a2642a\",\"lightAlpha\":0.4,\"lightAnimation\":{\"speed\":5,\"intensity\":5,\"type\":\"torch\"},\"disposition\":1,\"displayBars\":0,\"bar1\":{\"attribute\":\"attributes.hp\"},\"bar2\":{\"attribute\":\"\"},\"flags\":{\"conditional-visibility\":{\"invisible\":false,\"obscured\":false,\"indarkness\":false,\"hidden\":false,\"_ste\":null},\"tokenmagic\":{},\"ActiveAuras\":false,\"monks-tokenbar\":{\"movement\":null}},\"tokenId\":null,\"randomImg\":false},\"items\":[{\"_id\":\"O9ThymNjpRlq26u1\",\"name\":\"Flaming Sphere Damage\",\"type\":\"weapon\",\"img\":\"icons/magic/fire/orb-vortex.webp\",\"data\":{\"description\":{\"value\":\"\",\"chat\":\"\",\"unidentified\":\"\"},\"source\":\"\",\"quantity\":1,\"weight\":0,\"price\":0,\"attunement\":0,\"equipped\":true,\"rarity\":\"\",\"identified\":true,\"activation\":{\"type\":\"special\",\"cost\":0,\"condition\":\"\"},\"duration\":{\"value\":null,\"units\":\"\"},\"target\":{\"value\":null,\"width\":null,\"units\":\"\",\"type\":\"\"},\"range\":{\"value\":null,\"long\":null,\"units\":\"\"},\"uses\":{\"value\":0,\"max\":\"0\",\"per\":\"\"},\"consume\":{\"type\":\"\",\"target\":\"\",\"amount\":null},\"ability\":\"\",\"actionType\":\"save\",\"attackBonus\":0,\"chatFlavor\":\"\",\"critical\":null,\"damage\":{\"parts\":[[\"2d6\",\"fire\"]],\"versatile\":\"\"},\"formula\":\"\",\"save\":{\"ability\":\"dex\",\"dc\":15,\"scaling\":\"flat\"},\"armor\":{\"value\":10},\"hp\":{\"value\":0,\"max\":0,\"dt\":null,\"conditions\":\"\"},\"weaponType\":\"natural\",\"properties\":{\"ada\":false,\"amm\":false,\"fin\":false,\"fir\":false,\"foc\":false,\"hvy\":false,\"lgt\":false,\"lod\":false,\"mgc\":false,\"rch\":false,\"rel\":false,\"ret\":false,\"sil\":false,\"spc\":false,\"thr\":false,\"two\":false,\"ver\":false,\"nodam\":false,\"fulldam\":false,\"halfdam\":true},\"proficient\":true},\"effects\":[],\"folder\":null,\"sort\":1050000,\"permission\":{\"default\":3,\"g4WGw0lAZ3nIhapn\":3},\"flags\":{\"betterRolls5e\":{\"critRange\":{\"type\":\"String\",\"value\":null},\"critDamage\":{\"type\":\"String\",\"value\":\"\"},\"quickDesc\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false},\"quickAttack\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickSave\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickDamage\":{\"type\":\"Array\",\"value\":[true],\"altValue\":[true],\"context\":{\"0\":\"\"}},\"quickVersatile\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false},\"quickProperties\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickCharges\":{\"type\":\"Boolean\",\"value\":{\"quantity\":false,\"use\":false,\"resource\":true},\"altValue\":{\"quantity\":false,\"use\":true,\"resource\":true}},\"quickTemplate\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickOther\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true,\"context\":\"\"},\"quickFlavor\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickPrompt\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false}},\"midi-qol\":{\"onUseMacroName\":\"\"},\"core\":{\"sourceId\":\"Item.os6WBKZ9m8aOjecL\"},\"magicitems\":{\"enabled\":false,\"equipped\":false,\"attuned\":false,\"charges\":\"0\",\"chargeType\":\"c1\",\"destroy\":false,\"destroyFlavorText\":\"reaches 0 charges: it crumbles into ashes and is destroyed.\",\"rechargeable\":false,\"recharge\":\"0\",\"rechargeType\":\"t1\",\"rechargeUnit\":\"r1\",\"sorting\":\"l\"}}}],\"tint\":null,\"selectedKey\":\"data.abilities.cha.dc\",\"sort\":0,\"flags\":{\"tidy5e-sheet\":{\"allow-edit\":true},\"midi-qol\":{\"flamingSphere\":\"Scene.xMH6dt9g5Wt35rd3.Token.BLiAIGMjLp2oRc5L\"},\"exportSource\":{\"world\":\"testWorld\",\"system\":\"dnd5e\",\"coreVersion\":\"0.8.9\",\"systemVersion\":\"1.4.3\"},\"dae\":{\"damageApplied\":6}}}')\n        await MidiQOL.socket().executeAsGM(\"createActor\", {actorData: jsonData});\n    }\n    sphereActor = game.actors.getName(\"Flaming Sphere\");\n    if (!sphereActor) {\n        console.error(\"No Flaming Sphere\");\n        return;\n    }\n    const changeValue = `turn=end,saveDC=${caster.data.data.attributes.spelldc ?? 10},saveAbility=dex,damageRoll=${args[0].spellLevel}d6,damageType=fire,saveDamage=halfdamage,saveRemove=false`;\n    const updates = {\n        Item: {\n            \"Flaming Sphere Damage\": {\n                \"data.damage.parts\": [[`${args[0].spellLevel}d6`, \"fire\"]], \n                \"data.save.dc\": caster.data.data.attributes.spelldc\n            }\n        },\n        ActiveEffect: {\n            \"Flaming Sphere Damage\": {\n                \"changes\":  [{\"key\":\"flags.midi-qol.OverTime\",\"mode\":5,\"value\": changeValue,\"priority\":\"20\"}],\n                \"disabled\": false,\n                \"label\": \"Flaming Sphere Damage\",\n                \"icon\": \"icons/magic/fire/orb-vortex.webp\",\n                \"flags\": {\n                    \"ActiveAuras\": {\n                        \"isAura\":true,\n                        \"aura\":\"All\",\n                        \"radius\":7.5,\n                        \"alignment\":\"\",\n                        \"type\":\"\",\n                        \"ignoreSelf\":true,\n                        \"height\":true,\n                        \"hidden\":false,\n                        \"hostile\":false,\n                        \"onlyOnce\":false\n                    }\n                },\n            }\n        }\n    };\n    const summoned = await warpgate.spawn(\"Flaming Sphere\", {embedded: updates}, {}, {});\n    if (summoned.length !== 1) return;\n    const summonedUuid = `Scene.${canvas.scene.id}.Token.${summoned[0]}`;\n    await caster.createEmbeddedDocuments(\"ActiveEffect\", [{\n        \"changes\":  [{\"key\":\"flags.dae.deleteUuid\",\"mode\":5,\"value\": summonedUuid,\"priority\":\"30\"}],\n        \"label\": \"Flaming Sphere Summon\",\n        \"duration\": {seconds: 60, rounds: 10},\n        \"origin\": args[0].itemUuid,\n        \"icon\": \"icons/magic/fire/orb-vortex.webp\",\n    }]);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.FucrWjq0XHzPvWL0"},"favtab":{"isFavorite":false},"exportSource":{"world":"tp-game-v3","system":"dnd5e","coreVersion":"0.8.9","systemVersion":"1.4.3"},"autoanimations":{"killAnim":false,"animLevel":false,"options":{"ammo":false,"scaleToToken":false,"enableCustomExplosion":false,"customExplosion":""},"override":false,"allSounds":{"item":{"enableAudio":false}},"sourceToken":{"enable":false},"targetToken":{"enable":false},"animType":"t10","explodeVariant":"antilifeshell","explodeColor":"random","explodeRadius":5,"explodeLoop":1,"explodeDelay":0},"cf":{"id":"temp_5o7edvfx9a","color":"#000000"},"scene-packer":{"sourceId":"Item.3hZPqG5t71nglFY1"}}}
{"_id":"olCKnWi9hZkuPRkW","name":"Longsword of Wounding MQ0.8.52","type":"weapon","img":"systems/dnd5e/icons/skills/affliction_01.jpg","data":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>Hit points lost to this weapon's damage can be regained only through a short or long rest, rather than by regeneration, magic, or any other means.</p>\n<p>Once per turn, when you hit a creature with an attack using this magic weapon, you can wound the target. At the start of each of the wounded creature's turns, it takes 1d4 necrotic damage for each time you've wounded it, and it can then make a DC 15 Constitution saving throw, ending the effect of all such wounds on itself on a success. Alternatively, the wounded creature, or a creature within 5 feet of it, can use an action to make a DC 15 Wisdom (Medicine) check, ending the effect of such wounds on it on a success.</p>\n<p> </p>\n<p>Does not enforce the once per turn rule.</p>","chat":"","unidentified":""},"source":"DMG pg. 207","quantity":1,"weight":3,"price":2000,"attunement":1,"equipped":false,"rarity":"rare","identified":true,"activation":{"type":"action","cost":1,"condition":"@item.attunement !== 1"},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8 + @mod","slashing"]],"versatile":"1d10 + @mod"},"formula":"","save":{"ability":"","dc":15,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":true,"ada":false,"mgc":false,"sil":false,"nodam":false,"fulldam":false,"halfdam":false,"critOther":false},"proficient":false,"attributes":{"spelldc":10}},"effects":[{"_id":"ZlIku5Sq0gOPI01P","changes":[{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=start,\ndamageBeforeSave=true,\nlabel=Wounded,\ndamageRoll=1d4,\ndamageType=necrotic,\nsaveDC=15,\nsaveAbility=con","priority":"20"}],"disabled":false,"duration":{"rounds":99,"startTime":null},"icon":"systems/dnd5e/icons/skills/affliction_01.jpg","label":"Wounded","origin":"Item.WmK8cD8MDoUq4SaV","transfer":false,"flags":{"dae":{"stackable":"count","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"data.abilities.cha.dc"}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.items.pG6dddIcb9NmPrdt"},"itemacro":{"macro":{"data":{"_id":null,"name":"Longsword of Wounding","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"//\nconst lastArg = args[args.length - 1];\nlet ttoken = await fromUuid(lastArg.tokenUuid);\nconst tactor = ttoken?.actor;\nconst item = await fromUuid(lastArg.origin);\nif (args[0] === \"on\") {\n  const sourceActor = item.parent;\n  const combatTime = game.combat.round + game.combat.turn / 100;\n  const lastTime = getProperty(sourceActor.data.flags, \"midi-qol.woundedTime\");\n  lastArg.canWound = !game.combat || (combatTime !== lastTime);\n  if (game.combat && lastArg.canWound) {\n    let combatTime = game.combat.round + game.combat.turn / 100;\n    let lastTime = getProperty(sourceActor.data.flags, \"midi-qol.woundedTime\");\n    if (combatTime !== lastTime) {\n      setProperty(sourceActor.data.flags, \"midi-qol.woundedTime\", combatTime)\n    }\n  } \n  if (!lastArg.canWound) {\n    const stacks = getProperty(lastArg.efData, \"flags.dae.stacks\") || 1;\n    const label = lastArg.efData.label.replace(/\\s+\\(\\d*\\)/, \"\") +` (${stacks - 1})`;\n    Hooks.once(\"midi-qol.RollComplete\", () => {\n    tactor.updateEmbeddedDocuments(\"ActiveEffect\", [{ _id: lastArg.efData._id, \"flags.dae.stacks\": stacks - 1, \"label\": label }]);\n    });\n  }\n} else if (args[0] === \"each\") {\n  const woundCount = getProperty(lastArg.efData, \"flags.dae.stacks\");\n  if (!woundCount) return;\n  const saveType = \"con\";\n  const DC = 15;\n  const flavor = `${CONFIG.DND5E.abilities[saveType]} DC${DC} ${item?.name || \"\"}`;\n  let save = (await tactor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\n  if (save >= DC) {\n    const effectsToDelete = tactor.effects.filter(ef => ef.data.origin === lastArg.origin).map(ef => ef.id);\n    ChatMessage.create({content: \"Save was made\"});\n    await MidiQOL.socket().executeAsGM(\"removeEffects\", { actorUuid: tactor.uuid, effects: [lastArg.effectId] })\n  } else {\n    let damageRoll = new Roll(`${woundCount}d4[necrotic]`).roll(); // could be argument\n    new MidiQOL.DamageOnlyWorkflow(tactor, ttoken, damageRoll.total, \"necrotic\", [ttoken], damageRoll, { flavor: `Failed Save for ${item.name}`, itemData: item?.toObject(), itemCardId: \"new\", useOther: true })\n  }\n} else if (args[0] === \"off\") {\n  // do any clean up\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"","criticalThreshold":"20","effectActivation":true},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false,"set1s":false,"set2s":false,"set3s":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickSave":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_bf8mj8lxpvb","color":"#000000"}}}
{"_id":"qSABZ8Fb2ymrlKzg","name":"Bardic Inspiration (Valor)","type":"feat","img":"systems/dnd5e/icons/skills/yellow_08.jpg","data":{"description":{"value":"<p>You can inspire others through stirring words or music. To do so, you use a bonus action on your turn to choose one creature other than yourself within 60 feet of you who can hear you. That creature gains one Bardic Inspiration die, a d6. Once within the next 10 minutes, the creature can roll the die and add the number rolled to one ability check, attack roll, or saving throw it makes. The creature can wait until after it rolls the d20 before deciding to use the Bardic Inspiration die, but must decide before the GM says whether the roll succeeds or fails. Once the Bardic Inspiration die is rolled, it is lost. A creature can have only one Bardic Inspiration die at a time.</p>\n<p>You can use this feature a number of times equal to your Charisma modifier (a minimum of once).</p>\n<p>You regain any expended uses when you finish a long rest.</p>\n<p>Your Bardic Inspiration die changes when you reach certain levels in this class. The die becomes a d8 at 5th level, a d10 at 10th level, and a d12 at 15th level.</p>\n<p><em>**Midi-qol note: The Other Formula is removed as it is not  required<br /> Additionally, recovery is set to long rest (for levels before @Compendium[dnd5e.classfeatures.3VDZGs5Ug3hIE322]{Font of Inspiration} is gained). Please manually adjust as required.</em></p>","chat":"","unidentified":""},"source":"PHB pg. 53","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":2,"max":"5","per":"lr","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Bard 1","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true}},"effects":[{"_id":"GrZ2AlujZEWCppJt","changes":[{"key":"flags.midi-qol.optional.bardicInspiration.attack","mode":5,"value":"1d@flags.dae.BardicInspirationDice","priority":"20"},{"key":"flags.midi-qol.optional.bardicInspiration.save","mode":5,"value":"1d@flags.dae.BardicInspirationDice","priority":"20"},{"key":"flags.midi-qol.optional.bardicInspiration.check","mode":5,"value":"1d@flags.dae.BardicInspirationDice","priority":"20"},{"key":"flags.midi-qol.optional.bardicInspiration.label","mode":5,"value":"Bardic Inspiration","priority":"20"},{"key":"flags.midi-qol.optional.bardicInspiration.damage","mode":5,"value":"1d@flags.dae.BardicInspirationDice","priority":"20"},{"key":"flags.midi-qol.optional.bardicInspiration.ac","mode":5,"value":"1d@flags.dae.BardicInspirationDice","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_08.jpg","label":"Inspired","origin":"Item.dQvh9dejF0s0d9nk","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc"]},{"_id":"E4t1UpMBxMNjDXAk","changes":[{"key":"flags.dae","mode":0,"value":"BardicInspirationDice (floor(@classes.bard.levels/5)+3) * 2","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_08.jpg","label":"Bardic Inspiration Dice","origin":"Item.qf4KSRUeFqSoP8fs","transfer":true,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dae"}],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.hpLNiGq7y67d2EHA"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true},"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"use":true},"altValue":{"use":true}}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"rdPhlAMO9wP6okMu","name":"Legendary Resistance","type":"feat","img":"systems/dnd5e/icons/skills/weapon_18.jpg","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>If the dragon fails a saving throw, it can choose to succeed instead.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"MM","activation":{"type":"none","cost":0,"condition":"If the dragon fails a saving throw, it can choose to succeed instead."},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":3,"max":"3","per":"day"},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"_id":"FniO7deC5cNc9vuy","changes":[{"key":"flags.midi-qol.optional.LegRes.save","mode":5,"value":"success","priority":"20"},{"key":"flags.midi-qol.optional.LegRes.count","mode":5,"value":"@resources.legres.value","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/weapon_18.jpg","label":"Legendary Resistance","origin":"Item.rO1EWt1SPvUJg7k3","transfer":true,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.abilities.cha.dc","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"g4WGw0lAZ3nIhapn":3},"flags":{"betterRolls5e":{"critRange":{"type":"String","value":""},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":false},"altValue":{"use":true,"resource":true,"charge":false}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"midi-qol":{"onUseMacroName":"","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.rO1EWt1SPvUJg7k3"},"cf":{"id":"temp_ldurt0p3e8","color":"#000000"}}}
{"_id":"rgdI7MjQ4xcXCKuE","name":"Acid Arrow MQ0.8.61","type":"spell","img":"systems/dnd5e/icons/spells/needles-acid-2.jpg","data":{"description":{"value":"<p>A shimmering green arrow streaks toward a target within range and bursts in a spray of acid. Make a ranged spell Attack against the target. On a hit, the target takes 4d4 acid damage immediately and 2d4 acid damage at the end of its next turn. On a miss, the arrow splashes the target with acid for half as much of the initial damage and no damage at the end of its next turn.</p><p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the damage (both initial and later) increases by 1d4 for each slot level above 2nd.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":90,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"rsak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["4d4","acid"]],"versatile":"2d4"},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"powdered rhubarb leaf and an adder's stomach","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d4"}},"effects":[{"_id":"3Cn2AvsfGx5SQrNY","changes":[{"key":"flags.midi-qol.OverTime","mode":2,"value":"turn=end,\nremoveCondition=true,\ndamageRoll=(@spellLevel)d4,\ndamageType=acid,\nlabel=Acid Arrow","priority":"20"}],"disabled":false,"duration":{"rounds":2,"startTime":null},"icon":"systems/dnd5e/icons/spells/needles-acid-2.jpg","label":"Acid Damage","origin":"Item.pn0iWVSSFz1uy4VV","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"StatusEffect"}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.4H6YgYdKgnX6ZQ8M"},"midi-qol":{"criticalThreshold":"20","onUseMacroName":"","effectActivation":false},"cf":{"id":"temp_5o7edvfx9a","color":"#000000"}}}
{"_id":"sAZUKPwT40mKTzbM","name":"Divine Smite MQ0.8.88","type":"spell","img":"systems/dnd5e/icons/skills/light_05.jpg","data":{"description":{"value":"<p>Starting at 2nd Level, when you hit a creature with a melee weapon Attack, you can expend one spell slot to deal radiant damage to the target, in addition to the weapon’s damage.</p>\n<p>The extra damage is 2d8 for a 1st-level spell slot, plus 1d8 for each Spell Level higher than 1st, to a maximum of 5d8.</p>\n<p>The damage increases by 1d8 if the target is an Undead or a fiend, to a maximum of 6d8.</p>\n<p> </p>\n<p>This item uses the \"item macro\" feature where the macro that does the rolling is bound to the item. If you want to edit the macro you need to have the item macros module installed, but it is not required to just use the item.</p>\n<p> </p>\n<p>Update: according to sources (Jeremy Crawford) improved divine smite does not increase the damage done by a divine smite - despite the helper text in improved divine smite.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":5,"long":5,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"con","components":{"value":"","vocal":false,"somatic":false,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":false},"scaling":{"mode":"none","formula":""},"spellType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"concentration":{"value":null,"_deprecated":true},"ritual":{"value":null,"_deprecated":true},"attributes":{"spelldc":10}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"dynamiceffects":{"effects":[{"modSpecKey":"macro.itemMacro","value":"@target @item.level @item","mode":"+","targetSpecific":false,"id":1,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[]},{"modSpecKey":"macro.tokenMagic","value":"fumes","mode":"+","targetSpecific":false,"id":2,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[],"label":"Macro TokenMagic"}],"equipActive":false,"alwaysActive":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"critRange":{"value":""},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false}},"favtab":{"isFavourite":true,"isFavorite":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Divine Smite MQ0.8.80","type":"script","author":"1UXY0jQNt6H7Nete","img":"icons/svg/dice-target.svg","scope":"global","command":"let target = await fromUuid(args[0].hitTargetUuids[0] ?? \"\");\nlet numDice = 1 + args[0].spellLevel;\nif (numDice > 5) numDice = 5;\n// Apparently improved divine smite should not be added to the divine smite. Uncomment these lines if you want it to be included\n// if (improvedDivineSmite) numDice += 1;\n// let improvedDivineSmite = args[0].actor.items.find(i=> i.name ===\"Improved Divine Smite\");\nlet undead = [\"undead\", \"fiend\"].some(type => (target?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\nif (undead) numDice += 1;\nif (args[0].isCritical) numDice = numDice * 2;\nlet damageRoll = await new Roll(`${numDice}d8`).roll();\nnew MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"radiant\", target ? [target] : [], damageRoll, {flavor: \"Divine Smite - Damage Roll (Radiant)\", itemCardId: args[0].itemCardId})","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"mess":{"templateTexture":""},"dae":{"alwaysActive":false,"activeEquipped":false},"midi-qol":{"onUseMacroName":"ItemMacro","effectActivation":false},"core":{"sourceId":"Item.pJKe8oNZdJSKtbcu"},"autoanimations":{"killAnim":false,"below":false,"override":false,"targetToken":{"enable":false},"sourceToken":{"enable":false},"allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":25},"item":{"enableAudio":false,"file":"","delay":100,"volume":25}},"autoOverride":{"enable":false},"version":1},"scene-packer":{"sourceId":"Item.2XCtHOdRoQPD7PYj"},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"u2tHnmhcHduwHMeM","name":"Flaming Sphere MQ0.8.61 no delete","type":"spell","img":"icons/magic/fire/orb-vortex.webp","data":{"description":{"value":"<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">A 5-foot-diameter Sphere of fire appears in an unoccupied space of your choice within range and lasts for the Duration. Any creature that ends its turn within 5 feet of the sp⁠here must make a Dexterity saving throw. The creature takes 2d6 fire damage on a failed save, or half as much damage on a successful one.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">As a Bonus Action, you can move the Sphere up to 30 feet. If you ram the sphe⁠re into a creature, that creature must make the saving throw against the sphere’s damage, and the sp⁠here stops moving this turn.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">When you move the Sphere, you can direct it over barriers up to 5 feet tall and jump it across pits up to 10 feet wide. The sp⁠here ignites flammable Objects not being worn or carried, and it sheds bright light in a 20-foot radius and dim light for an additional 20 feet.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\"><strong style=\"box-sizing:border-box;user-select:text\">At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the damage increases by 1d6 for each slot level above 2nd.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">MidiQol Will summon the flaming sphere actor (and create such an actor if one does not exist). Requies active auras and midi-qol to work.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">Until 0.9 auto removal of the summoned sphere has been disabled.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":2,"school":"abj","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"A bit of tallow, a pinch of brimstone, and a dusting of powdered iron","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"betterRolls5e":{"critRange":{"type":"String","value":null},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":true},"altValue":{"use":false,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"midi-qol":{"onUseMacroName":"ItemMacro","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Flaming Sphere MQ0.8.61 no delete","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].tag === \"OnUse\") {\n// const sourceActor = new CONFIG.Actor.documentClass(actorData);\n// let tokenData = await sourceActor.getTokenData();\n// const toCreate = tokenData.toObject();\n    const casterToken = await fromUuid(args[0].tokenUuid);\n    const caster = casterToken.actor;\n    let sphereActor = game.actors.getName(\"Flaming Sphere\");\n    if (!sphereActor) {\n        const jsonData = JSON.parse('{\"name\":\"Flaming Sphere\",\"type\":\"npc\",\"img\":\"icons/magic/fire/orb-vortex.webp\",\"data\":{\"abilities\":{\"str\":{\"value\":10,\"proficient\":0},\"dex\":{\"value\":10,\"proficient\":0},\"con\":{\"value\":10,\"proficient\":0},\"int\":{\"value\":10,\"proficient\":0},\"wis\":{\"value\":10,\"proficient\":0},\"cha\":{\"value\":10,\"proficient\":0}},\"attributes\":{\"ac\":{\"flat\":10,\"calc\":\"natural\",\"formula\":\"\"},\"hp\":{\"value\":10,\"min\":0,\"max\":10,\"temp\":0,\"tempmax\":null,\"formula\":\"\"},\"init\":{\"value\":0,\"bonus\":0},\"movement\":{\"burrow\":0,\"climb\":0,\"fly\":0,\"swim\":0,\"walk\":30,\"units\":\"ft\",\"hover\":false},\"senses\":{\"darkvision\":0,\"blindsight\":0,\"tremorsense\":0,\"truesight\":0,\"units\":\"ft\",\"special\":\"\"},\"spellcasting\":\"int\",\"death\":{\"success\":0,\"failure\":0}},\"details\":{\"biography\":{\"value\":\"\",\"public\":\"\"},\"alignment\":\"\",\"race\":\"\",\"type\":{\"value\":\"\",\"subtype\":\"\",\"swarm\":\"\",\"custom\":\"\"},\"environment\":\"\",\"cr\":1,\"spellLevel\":0,\"xp\":{\"value\":10},\"source\":\"\",\"gender\":\"\",\"age\":\"\",\"height\":\"\",\"weight\":\"\",\"eyes\":\"\",\"skin\":\"\",\"hair\":\"\",\"notes1name\":\"\",\"notes2name\":\"\",\"notes3name\":\"\",\"notes4name\":\"\"},\"traits\":{\"size\":\"med\",\"di\":{\"value\":[],\"custom\":\"\"},\"dr\":{\"value\":[],\"custom\":\"\"},\"dv\":{\"value\":[],\"custom\":\"\"},\"ci\":{\"value\":[],\"custom\":\"\"},\"languages\":{\"value\":[],\"custom\":\"\"}},\"currency\":{\"pp\":0,\"gp\":0,\"ep\":0,\"sp\":0,\"cp\":0},\"skills\":{\"acr\":{\"value\":0,\"ability\":\"dex\"},\"ani\":{\"value\":0,\"ability\":\"wis\"},\"arc\":{\"value\":0,\"ability\":\"int\"},\"ath\":{\"value\":0,\"ability\":\"str\"},\"dec\":{\"value\":0,\"ability\":\"cha\"},\"his\":{\"value\":0,\"ability\":\"int\"},\"ins\":{\"value\":0,\"ability\":\"wis\"},\"itm\":{\"value\":0,\"ability\":\"cha\"},\"inv\":{\"value\":0,\"ability\":\"int\"},\"med\":{\"value\":0,\"ability\":\"wis\"},\"nat\":{\"value\":0,\"ability\":\"int\"},\"prc\":{\"value\":0,\"ability\":\"wis\"},\"prf\":{\"value\":0,\"ability\":\"cha\"},\"per\":{\"value\":0,\"ability\":\"cha\"},\"rel\":{\"value\":0,\"ability\":\"int\"},\"slt\":{\"value\":0,\"ability\":\"dex\"},\"ste\":{\"value\":0,\"ability\":\"dex\"},\"sur\":{\"value\":0,\"ability\":\"wis\"}},\"spells\":{\"spell1\":{\"value\":0,\"override\":null},\"spell2\":{\"value\":0,\"override\":null},\"spell3\":{\"value\":0,\"override\":null},\"spell4\":{\"value\":0,\"override\":null},\"spell5\":{\"value\":0,\"override\":null},\"spell6\":{\"value\":0,\"override\":null},\"spell7\":{\"value\":0,\"override\":null},\"spell8\":{\"value\":0,\"override\":null},\"spell9\":{\"value\":0,\"override\":null},\"pact\":{\"value\":0,\"override\":null}},\"bonuses\":{\"mwak\":{\"attack\":\"\",\"damage\":\"\"},\"rwak\":{\"attack\":\"\",\"damage\":\"\"},\"msak\":{\"attack\":\"\",\"damage\":\"\"},\"rsak\":{\"attack\":\"\",\"damage\":\"\"},\"abilities\":{\"check\":\"\",\"save\":\"\",\"skill\":\"\"},\"spell\":{\"dc\":\"\"}},\"resources\":{\"legact\":{\"value\":0,\"max\":0},\"legres\":{\"value\":0,\"max\":0},\"lair\":{\"value\":false,\"initiative\":0}}},\"token\":{\"_id\":\"wsnEu8ZSbBYL5S9i\",\"name\":\"Flaming Sphere\",\"displayName\":0,\"actorId\":\"WlOopcsUtThmw4gy\",\"actorLink\":true,\"actorData\":{},\"img\":\"icons/magic/fire/orb-vortex.webp\",\"tint\":null,\"width\":1,\"height\":1,\"scale\":1,\"mirrorX\":false,\"mirrorY\":false,\"x\":null,\"y\":null,\"elevation\":null,\"lockRotation\":false,\"rotation\":0,\"effects\":[],\"alpha\":1,\"hidden\":false,\"vision\":false,\"dimSight\":0,\"brightSight\":30,\"dimLight\":40,\"brightLight\":20,\"sightAngle\":0,\"lightAngle\":0,\"lightColor\":\"#a2642a\",\"lightAlpha\":0.4,\"lightAnimation\":{\"speed\":5,\"intensity\":5,\"type\":\"torch\"},\"disposition\":1,\"displayBars\":0,\"bar1\":{\"attribute\":\"attributes.hp\"},\"bar2\":{\"attribute\":\"\"},\"flags\":{\"conditional-visibility\":{\"invisible\":false,\"obscured\":false,\"indarkness\":false,\"hidden\":false,\"_ste\":null},\"tokenmagic\":{},\"ActiveAuras\":false,\"monks-tokenbar\":{\"movement\":null}},\"tokenId\":null,\"randomImg\":false},\"items\":[{\"_id\":\"O9ThymNjpRlq26u1\",\"name\":\"Flaming Sphere Damage\",\"type\":\"weapon\",\"img\":\"icons/magic/fire/orb-vortex.webp\",\"data\":{\"description\":{\"value\":\"\",\"chat\":\"\",\"unidentified\":\"\"},\"source\":\"\",\"quantity\":1,\"weight\":0,\"price\":0,\"attunement\":0,\"equipped\":true,\"rarity\":\"\",\"identified\":true,\"activation\":{\"type\":\"special\",\"cost\":0,\"condition\":\"\"},\"duration\":{\"value\":null,\"units\":\"\"},\"target\":{\"value\":null,\"width\":null,\"units\":\"\",\"type\":\"\"},\"range\":{\"value\":null,\"long\":null,\"units\":\"\"},\"uses\":{\"value\":0,\"max\":\"0\",\"per\":\"\"},\"consume\":{\"type\":\"\",\"target\":\"\",\"amount\":null},\"ability\":\"\",\"actionType\":\"save\",\"attackBonus\":0,\"chatFlavor\":\"\",\"critical\":null,\"damage\":{\"parts\":[[\"2d6\",\"fire\"]],\"versatile\":\"\"},\"formula\":\"\",\"save\":{\"ability\":\"dex\",\"dc\":15,\"scaling\":\"flat\"},\"armor\":{\"value\":10},\"hp\":{\"value\":0,\"max\":0,\"dt\":null,\"conditions\":\"\"},\"weaponType\":\"natural\",\"properties\":{\"ada\":false,\"amm\":false,\"fin\":false,\"fir\":false,\"foc\":false,\"hvy\":false,\"lgt\":false,\"lod\":false,\"mgc\":false,\"rch\":false,\"rel\":false,\"ret\":false,\"sil\":false,\"spc\":false,\"thr\":false,\"two\":false,\"ver\":false,\"nodam\":false,\"fulldam\":false,\"halfdam\":true},\"proficient\":true},\"effects\":[],\"folder\":null,\"sort\":1050000,\"permission\":{\"default\":3,\"g4WGw0lAZ3nIhapn\":3},\"flags\":{\"betterRolls5e\":{\"critRange\":{\"type\":\"String\",\"value\":null},\"critDamage\":{\"type\":\"String\",\"value\":\"\"},\"quickDesc\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false},\"quickAttack\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickSave\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickDamage\":{\"type\":\"Array\",\"value\":[true],\"altValue\":[true],\"context\":{\"0\":\"\"}},\"quickVersatile\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false},\"quickProperties\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickCharges\":{\"type\":\"Boolean\",\"value\":{\"quantity\":false,\"use\":false,\"resource\":true},\"altValue\":{\"quantity\":false,\"use\":true,\"resource\":true}},\"quickTemplate\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickOther\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true,\"context\":\"\"},\"quickFlavor\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickPrompt\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false}},\"midi-qol\":{\"onUseMacroName\":\"\"},\"core\":{\"sourceId\":\"Item.os6WBKZ9m8aOjecL\"},\"magicitems\":{\"enabled\":false,\"equipped\":false,\"attuned\":false,\"charges\":\"0\",\"chargeType\":\"c1\",\"destroy\":false,\"destroyFlavorText\":\"reaches 0 charges: it crumbles into ashes and is destroyed.\",\"rechargeable\":false,\"recharge\":\"0\",\"rechargeType\":\"t1\",\"rechargeUnit\":\"r1\",\"sorting\":\"l\"}}}],\"effects\":[{\"_id\":\"ngsy97TUodpiL9ux\",\"changes\":[{\"key\":\"flags.midi-qol.OverTime\",\"mode\":5,\"value\":\"turn=end,saveDC=@attributes.spelldc,saveAbility=dex,damageRoll=2d6,damageType=fire,saveDamage=halfdamage,saveRemove=false\",\"priority\":\"20\"}],\"disabled\":true,\"duration\":{\"startTime\":18594119675,\"startRound\":6,\"startTurn\":1},\"icon\":\"icons/magic/fire/orb-vortex.webp\",\"label\":\"Flaming Sphere Damage\",\"origin\":\"Actor.kbSOPveno9lCRule\",\"transfer\":false,\"flags\":{\"dae\":{\"macroRepeat\":\"none\",\"specialDuration\":[]},\"dnd5e-helpers\":{\"rest-effect\":\"Ignore\"},\"ActiveAuras\":{\"isAura\":true,\"aura\":\"All\",\"radius\":7.5,\"alignment\":\"\",\"type\":\"\",\"ignoreSelf\":true,\"height\":true,\"hidden\":false,\"hostile\":false,\"onlyOnce\":false}},\"tint\":null,\"selectedKey\":\"data.abilities.cha.dc\"}],\"sort\":0,\"flags\":{\"tidy5e-sheet\":{\"allow-edit\":true},\"midi-qol\":{\"flamingSphere\":\"Scene.xMH6dt9g5Wt35rd3.Token.BLiAIGMjLp2oRc5L\"},\"exportSource\":{\"world\":\"testWorld\",\"system\":\"dnd5e\",\"coreVersion\":\"0.8.9\",\"systemVersion\":\"1.4.3\"},\"dae\":{\"damageApplied\":6}}}')\n        await MidiQOL.socket().executeAsGM(\"createActor\", {actorData: jsonData});\n        sphereActor = game.actors.getName(\"Flaming Sphere\");\n    }\n    if (!sphereActor) {\n        console.error(\"No Flaming Sphere\");\n        return;\n    }\n    let toCreate = (await sphereActor.getTokenData()).toObject();\n    toCreate.x = casterToken.data.x;\n    toCreate.y = casterToken.data.y;\n    toCreate.img = sphereActor.img;\n    toCreate.name= \"Flaming Sphere\";\n    toCreate.actorLink = false;\n    const createdTokens = await canvas.scene.createEmbeddedDocuments(\"Token\", [toCreate]);\n    if (createdTokens.length !== 1) {\n        console.error(\"Token creation broke\", createdTokens);\n        return\n    }\n    let createdToken = createdTokens[0];\n    const itemId = createdToken.actor.items.getName(\"Flaming Sphere Damage\")?.id;\n    if (itemId) {\n        await createdToken.actor.updateEmbeddedDocuments(\"Item\", [{_id: itemId, \"data.damage.parts\": [[`${args[0].spellLevel}d6`, \"fire\"]], \"data.save.dc\": caster.data.data.attributes.spelldc}])\n    }\n    let latestCreatedActor = MidiQOL.MQfromActorUuid(createdToken.uuid);\n    let damageEffectId = latestCreatedActor.effects.find(e=>e.data.label===\"Flaming Sphere Damage\")?.id;\n    const changeValue = `turn=end,saveDC=${caster.data.data.attributes.spelldc ?? 10},saveAbility=dex,damageRoll=${args[0].spellLevel}d6,damageType=fire,saveDamage=halfdamage,saveRemove=false`;\n    const changes = [{\"key\":\"flags.midi-qol.OverTime\",\"mode\":5,\"value\": changeValue,\"priority\":\"20\"}]\n    await latestCreatedActor.updateEmbeddedDocuments(\"ActiveEffect\", [{_id: damageEffectId, changes}]);\n    setTimeout( () => {\n\n        latestCreatedActor.updateEmbeddedDocuments(\"ActiveEffect\", [{_id: damageEffectId, disabled: false}]);\n    }, 1000);\n    // createdToken.update({x: casterToken.data.x + canvas.grid.w, y: casterToken.data.y + canvas.grid.h})\n    await caster.setFlag(\"midi-qol\", \"flamingSphere\", {uuid: createdToken.uuid, id: createdToken.id});\n} else if (args[0] === \"off\") { // put this back in 0.9\n    const lastArg = args[args.length -1];\n    const casterToken = await fromUuid(lastArg.tokenUuid);\n    const caster = casterToken.actor;\n    const tokenUuid = await caster.getFlag(\"midi-qol\", \"flamingSphere\")?.uuid;\n    if (tokenUuid) {\n        const token = await fromUuid(tokenUuid);\n        await token?.delete();\n        await caster.unsetFlag(\"midi-qol\", \"flamingShpere\");\n    }\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.FucrWjq0XHzPvWL0"},"favtab":{"isFavorite":true},"exportSource":{"world":"tp-game-v3","system":"dnd5e","coreVersion":"0.8.9","systemVersion":"1.4.3"},"autoanimations":{"killAnim":false,"animLevel":false,"options":{"ammo":false,"scaleToToken":false,"enableCustomExplosion":false,"customExplosion":""},"override":false,"allSounds":{"item":{"enableAudio":false}},"sourceToken":{"enable":false},"targetToken":{"enable":false},"animType":"t10","explodeVariant":"antilifeshell","explodeColor":"random","explodeRadius":5,"explodeLoop":1,"explodeDelay":0},"cf":{"id":"temp_5o7edvfx9a","color":"#000000"}}}
{"_id":"uvRQayOyn61L6vOV","name":"Auto Sneak Attack","type":"feat","img":"systems/dnd5e/icons/skills/violet_27.jpg","data":{"description":{"value":"<p>Adding this feature to an actor will cause Sneak Attack to be auto used at the first opportunity, rather than showing a confirmation dialog.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"_id":"B9dVucVVEOX26bAy","flags":{"dae":{"stackable":"none","specialDuration":[],"macroRepeat":"none","transfer":true},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"changes":[{"key":"flags.dae","mode":0,"value":"autoSneak 1","priority":"10"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/violet_27.jpg","label":"Auto Sneak Attack","origin":"Item.Dnn0xuVqFSATQipk","tint":"","transfer":true,"selectedKey":"flags.dae"}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false},"cf":{"id":"temp_ovon30cu8t","color":"#000000"}}}
{"_id":"wBGmZwkGN2FTcNut","name":"Absorb Elements","type":"spell","img":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The spell captures some of the incoming energy, lessening its effect on you and storing it for your next melee attack. You have resistance to the triggering damage type until the start of your next turn. Also, the first time you hit with a melee attack on your next turn, the target takes an extra [[/r 1d6]] damage of the triggering type, and the spell ends.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"37\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, the extra damage increases by [[/r 1d6]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"XGE","activation":{"type":"reaction","cost":1,"condition":"which you take when you take acid, cold, fire, lightning, or thunder damage"},"duration":{"value":1,"units":"round"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"abj","components":{"value":"","vocal":false,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d6"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{}},"effects":[{"_id":"iJ9E4fnIwXjfi1TP","flags":{"dae":{"stackable":"none","macroRepeat":"none","transfer":false,"specialDuration":["DamageDealt"]},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"changes":[{"key":"data.bonuses.msak.damage","mode":2,"value":"0","priority":"20"},{"key":"data.bonuses.mwak.damage","mode":2,"value":"0","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":2,"startTurn":1},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","label":"Absorb Elements","tint":null,"transfer":false,"selectedKey":["data.bonuses.msak.damage","data.bonuses.mwak.damage"]},{"_id":"8r9eWcqP6QyIbPWU","changes":[{"key":"data.traits.dr.value","mode":2,"value":"fire","priority":"20"}],"disabled":false,"duration":{"rounds":2,"startTime":null},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","label":"Absorb Elements Resistance","origin":"Item.csBPw2sdmOigPnOV","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["turnEnd"],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"tint":"","selectedKey":"data.traits.dr.value"}],"folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3},"flags":{"dynamiceffects":{"equipActive":[true,true,true],"alwaysActive":[true,true,true]},"mess":{"templateTexture":""},"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"waterdeep-dungeon-of-the-mad-mage","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.4"},"betterRolls5e":{"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":true},"altValue":{"use":false,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"itemacro":{"macro":{"data":{"_id":null,"name":"Absorb Elements","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"let tactor;\nlet itemname = \"Absorb Elements\";\nif (args[0].tokenUuid) tactor = (await fromUuid(args[0].tokenUuid)).actor;\nelse tactor = game.actors.get(args[0].actorId);\n\nlet dialog = new Promise((resolve, reject) => {\n    new Dialog({\n        title: 'Choose a damage type',\n        content: `\n          <form class=\"flexcol\">\n            <div class=\"form-group\">\n              <select id=\"element\">\n                <option value=\"acid\">Acid</option>\n                <option value=\"cold\">Cold</option>\n                <option value=\"fire\">Fire</option>\n                <option value=\"lightning\">Lightning</option>\n                <option value=\"thunder\">Thunder</option>\n              </select>\n            </div>\n          </form>\n        `,\n        //select element type\n        buttons: {\n            yes: {\n                icon: '<i class=\"fas fa-bolt\"></i>',\n                label: 'Select',\n                callback: async (html) => {\n                    let element = html.find('#element').val();\n                    let effect =  tactor.effects.find(i => i.data.label === itemname);\n                    let changes = duplicate(effect.data.changes);\n                    changes[0].value = `${args[0].spellLevel}d6[${element}]`;\n                    changes[1].value = `${args[0].spellLevel}d6[${element}]`;\n                    await effect.update({changes});\n                    effect =  tactor.effects.find(i => i.data.label === `${itemname} Resistance`);\n                    changes = duplicate(effect.data.changes);\n                    changes[0].value = element;\n                    await effect.update({changes});\n                    resolve();\n                },\n            },\n        }\n    }).render(true);\n})\nawait dialog;","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false},"core":{"sourceId":"Item.jwe2NqmH3YX6SMVx"},"autoanimations":{"killAnim":false,"below":false,"override":false,"targetToken":{"enable":false},"sourceToken":{"enable":false},"allSounds":{},"autoOverride":{"enable":false},"version":1},"favtab":{"isFavorite":false},"cf":{"id":"temp_5o7edvfx9a","color":"#000000"}}}
